{"ast":null,"code":"var _jsxFileName = \"/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport fetch from \"isomorphic-unfetch\";\nimport * as Yup from \"yup\";\nimport Router from \"next/router\";\nimport Cookie from \"js-cookie\";\nimport Input from \"../components/Input\";\nimport Field from \"../components/Field\";\nimport Label from \"../components/Label\";\nimport Button from \"../components/Button\";\n\nconst SignupSchema = isSignUp => Yup.object().shape({\n  name: isSignUp && Yup.string().min(2, \"too short\").required(\"required\"),\n  email: Yup.string().email(\"not valid\").required(\"required\"),\n  password: Yup.string().min(6, \"too short\").required(\"required\")\n});\n\nexport default (props => {\n  const {\n    0: isSignUp,\n    1: setIsSignUp\n  } = useState(false);\n\n  const handleSubmit = async (values, context) => {\n    console.log(values);\n    const request = await fetch(\"/api/authenticate\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(_objectSpread({}, values, {\n        isSignUp\n      }))\n    });\n    context.setSubmitting(false);\n\n    if (request.ok) {\n      const token = await request.text();\n      Cookie.set(\"_wsp\", token, {\n        secure: false,\n        sameSite: \"lax\"\n      });\n      false && Router.push(\"/\");\n    } else {\n      // errors!\n      const error = await request.text();\n      context.setErrors({\n        general: error || \"There was a problem authenticating you with that email and password combination.\"\n      });\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: {\n      backgroundColor: \"#fffff0\"\n    },\n    className: \"jsx-4037609192\" + \" \" + \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(Formik, {\n    initialValues: {\n      name: \"\",\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: SignupSchema(isSignUp),\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, ({\n    errors,\n    touched,\n    values,\n    isSubmitting,\n    isValid,\n    getFieldProps\n  }) => __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-4037609192\" + \" \" + \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, isSignUp && __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }, __jsx(Label, {\n    htmlFor: \"name\",\n    error: touched.name && errors.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"\\uD83D\\uDC69\\u200D\\uD83D\\uDCBB Name\"), __jsx(Input, _extends({\n    name: \"name\",\n    id: \"name\",\n    type: \"text\"\n  }, getFieldProps(\"name\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }))), __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, __jsx(Label, {\n    htmlFor: \"email\",\n    error: touched.email && errors.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, \"\\u2709\\uFE0F Email\"), __jsx(Input, _extends({\n    type: \"email\",\n    id: \"email\",\n    name: \"email\"\n  }, getFieldProps(\"email\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }))), __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, __jsx(Label, {\n    htmlFor: \"password\",\n    error: touched.password && errors.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, \"\\uD83D\\uDD11 Password\"), __jsx(Input, _extends({\n    id: \"password\",\n    type: \"password\",\n    name: \"password\"\n  }, getFieldProps(\"password\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }))), __jsx(Button, {\n    disabled: isSubmitting || !isValid,\n    loading: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, isSignUp ? \"Sign up\" : \"Log in\"), __jsx(\"p\", {\n    className: \"jsx-4037609192\" + \" \" + \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, errors === null || errors === void 0 ? void 0 : errors.general), \" \"))), __jsx(\"p\", {\n    className: \"jsx-4037609192\" + \" \" + \"log-in-prompt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, isSignUp ? \"Have\" : \"Need\", \" an account?\", __jsx(\"span\", {\n    className: \"jsx-4037609192\" + \" \" + \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"Click below, fill out the form, et vola!\")), __jsx(Button, {\n    onClick: () => setIsSignUp(!isSignUp),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, isSignUp ? \"Log in\" : \"Sign up\")), __jsx(_JSXStyle, {\n    id: \"4037609192\",\n    __self: this\n  }, \".error.jsx-4037609192{text-align:center;color:var(--error);}.page.jsx-4037609192{width:100%;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.log-in-prompt.jsx-4037609192{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:0.25rem;}.log-in-prompt.jsx-4037609192>.small.jsx-4037609192{font-size:0.75rem;opacity:0.6;}.form.jsx-4037609192{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:300px;}.form.jsx-4037609192>.field,.form.jsx-4037609192>.btn{margin-bottom:0.5rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9BcHBsaWNhdGlvbnMvQ3Jvd2RNT1QvY3Jvd2Rtb3QtbmV4dGpzL3BhZ2VzL2xvZ2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBJa0IsQUFHNkIsQUFJUCxBQVFFLEFBT0ssQUFJTCxBQU1RLFdBeEJKLE9BSkUsQUFtQlAsR0FVZCxPQXhCZSxFQWVmLE9BbkJBLHFDQVd3QixBQVdBLDRCQWpCQSxrREFPSCxBQVdQLFlBQ2QsZ0JBbEJxQixpRUFPSSw0QkFOQSx1RUFPSixtQkFDckIsU0FQQSIsImZpbGUiOiIvQXBwbGljYXRpb25zL0Nyb3dkTU9UL2Nyb3dkbW90LW5leHRqcy9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBGb3JtaWssIEZvcm0gfSBmcm9tIFwiZm9ybWlrXCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xuaW1wb3J0ICogYXMgWXVwIGZyb20gXCJ5dXBcIjtcbmltcG9ydCBSb3V0ZXIgZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgQ29va2llIGZyb20gXCJqcy1jb29raWVcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vY29tcG9uZW50cy9JbnB1dFwiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9jb21wb25lbnRzL0ZpZWxkXCI7XG5pbXBvcnQgTGFiZWwgZnJvbSBcIi4uL2NvbXBvbmVudHMvTGFiZWxcIjtcbmltcG9ydCBCdXR0b24gZnJvbSBcIi4uL2NvbXBvbmVudHMvQnV0dG9uXCI7XG5cbmNvbnN0IFNpZ251cFNjaGVtYSA9IChpc1NpZ25VcCkgPT5cbiAgWXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICBuYW1lOiBpc1NpZ25VcCAmJiBZdXAuc3RyaW5nKCkubWluKDIsIFwidG9vIHNob3J0XCIpLnJlcXVpcmVkKFwicmVxdWlyZWRcIiksXG4gICAgZW1haWw6IFl1cC5zdHJpbmcoKS5lbWFpbChcIm5vdCB2YWxpZFwiKS5yZXF1aXJlZChcInJlcXVpcmVkXCIpLFxuICAgIHBhc3N3b3JkOiBZdXAuc3RyaW5nKCkubWluKDYsIFwidG9vIHNob3J0XCIpLnJlcXVpcmVkKFwicmVxdWlyZWRcIiksXG4gIH0pO1xuXG5leHBvcnQgZGVmYXVsdCAocHJvcHMpID0+IHtcbiAgY29uc3QgW2lzU2lnblVwLCBzZXRJc1NpZ25VcF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKHZhbHVlcywgY29udGV4dCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKFwiL2FwaS9hdXRoZW50aWNhdGVcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIGlzU2lnblVwLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBjb250ZXh0LnNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuXG4gICAgaWYgKHJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG5cbiAgICAgIENvb2tpZS5zZXQoXCJfd3NwXCIsIHRva2VuLCB7XG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLFxuICAgICAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICAgIH0pO1xuXG4gICAgICBwcm9jZXNzLmJyb3dzZXIgJiYgUm91dGVyLnB1c2goXCIvXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlcnJvcnMhXG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuXG4gICAgICBjb250ZXh0LnNldEVycm9ycyh7XG4gICAgICAgIGdlbmVyYWw6XG4gICAgICAgICAgZXJyb3IgfHxcbiAgICAgICAgICBcIlRoZXJlIHdhcyBhIHByb2JsZW0gYXV0aGVudGljYXRpbmcgeW91IHdpdGggdGhhdCBlbWFpbCBhbmQgcGFzc3dvcmQgY29tYmluYXRpb24uXCIsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlXCIgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmZmZmMFwifX0+XG4gICAgICAgIDxGb3JtaWtcbiAgICAgICAgICBpbml0aWFsVmFsdWVzPXt7XG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgZW1haWw6IFwiXCIsXG4gICAgICAgICAgICBwYXNzd29yZDogXCJcIixcbiAgICAgICAgICB9fVxuICAgICAgICAgIHZhbGlkYXRpb25TY2hlbWE9e1NpZ251cFNjaGVtYShpc1NpZ25VcCl9XG4gICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH1cbiAgICAgICAgPlxuICAgICAgICAgIHsoe1xuICAgICAgICAgICAgZXJyb3JzLFxuICAgICAgICAgICAgdG91Y2hlZCxcbiAgICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICAgIGlzU3VibWl0dGluZyxcbiAgICAgICAgICAgIGlzVmFsaWQsXG4gICAgICAgICAgICBnZXRGaWVsZFByb3BzLFxuICAgICAgICAgIH0pID0+IChcbiAgICAgICAgICAgIDxGb3JtPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm1cIj5cbiAgICAgICAgICAgICAgICB7aXNTaWduVXAgJiYgKFxuICAgICAgICAgICAgICAgICAgPEZpZWxkPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cIm5hbWVcIiBlcnJvcj17dG91Y2hlZC5uYW1lICYmIGVycm9ycy5uYW1lfT5cbiAgICAgICAgICAgICAgICAgICAgICDwn5Gp4oCN8J+SuyBOYW1lXG4gICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICB7Li4uZ2V0RmllbGRQcm9wcyhcIm5hbWVcIil9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0ZpZWxkPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPEZpZWxkPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJlbWFpbFwiIGVycm9yPXt0b3VjaGVkLmVtYWlsICYmIGVycm9ycy5lbWFpbH0+XG4gICAgICAgICAgICAgICAgICAgIOKcie+4jyBFbWFpbFxuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgey4uLmdldEZpZWxkUHJvcHMoXCJlbWFpbFwiKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9GaWVsZD5cbiAgICAgICAgICAgICAgICA8RmllbGQ+XG4gICAgICAgICAgICAgICAgICA8TGFiZWxcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I9e3RvdWNoZWQucGFzc3dvcmQgJiYgZXJyb3JzLnBhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICDwn5SRIFBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIGlkPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICB7Li4uZ2V0RmllbGRQcm9wcyhcInBhc3N3b3JkXCIpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0ZpZWxkPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1N1Ym1pdHRpbmcgfHwgIWlzVmFsaWR9XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtpc1N1Ym1pdHRpbmd9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2lzU2lnblVwID8gXCJTaWduIHVwXCIgOiBcIkxvZyBpblwifVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9ycz8uZ2VuZXJhbH08L3A+e1wiIFwifVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICApfVxuICAgICAgICA8L0Zvcm1paz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibG9nLWluLXByb21wdFwiPlxuICAgICAgICAgIHtpc1NpZ25VcCA/IFwiSGF2ZVwiIDogXCJOZWVkXCJ9IGFuIGFjY291bnQ/XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic21hbGxcIj5cbiAgICAgICAgICAgIENsaWNrIGJlbG93LCBmaWxsIG91dCB0aGUgZm9ybSwgZXQgdm9sYSFcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRJc1NpZ25VcCghaXNTaWduVXApfT5cbiAgICAgICAgICB7aXNTaWduVXAgPyBcIkxvZyBpblwiIDogXCJTaWduIHVwXCJ9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5lcnJvciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgLnBhZ2Uge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC5sb2ctaW4tcHJvbXB0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAwLjI1cmVtO1xuICAgICAgICB9XG4gICAgICAgIC5sb2ctaW4tcHJvbXB0ID4gLnNtYWxsIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICB9XG4gICAgICAgIC5mb3JtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5mb3JtID4gOmdsb2JhbCguZmllbGQpLFxuICAgICAgICAuZm9ybSA+IDpnbG9iYWwoLmJ0bikge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvPlxuICApO1xufTsiXX0= */\\n/*@ sourceURL=/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js */\"));\n});","map":{"version":3,"sources":["/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js"],"names":["useState","Formik","Form","fetch","Yup","Router","Cookie","Input","Field","Label","Button","SignupSchema","isSignUp","object","shape","name","string","min","required","email","password","props","setIsSignUp","handleSubmit","values","context","console","log","request","method","headers","body","JSON","stringify","setSubmitting","ok","token","text","set","secure","sameSite","push","error","setErrors","general","backgroundColor","errors","touched","isSubmitting","isValid","getFieldProps"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport fetch from \"isomorphic-unfetch\";\nimport * as Yup from \"yup\";\nimport Router from \"next/router\";\nimport Cookie from \"js-cookie\";\nimport Input from \"../components/Input\";\nimport Field from \"../components/Field\";\nimport Label from \"../components/Label\";\nimport Button from \"../components/Button\";\n\nconst SignupSchema = (isSignUp) =>\n  Yup.object().shape({\n    name: isSignUp && Yup.string().min(2, \"too short\").required(\"required\"),\n    email: Yup.string().email(\"not valid\").required(\"required\"),\n    password: Yup.string().min(6, \"too short\").required(\"required\"),\n  });\n\nexport default (props) => {\n  const [isSignUp, setIsSignUp] = useState(false);\n\n  const handleSubmit = async (values, context) => {\n    console.log(values);\n    const request = await fetch(\"/api/authenticate\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        ...values,\n        isSignUp,\n      }),\n    });\n\n    context.setSubmitting(false);\n\n    if (request.ok) {\n      const token = await request.text();\n\n      Cookie.set(\"_wsp\", token, {\n        secure: process.env.NODE_ENV === \"production\",\n        sameSite: \"lax\",\n      });\n\n      process.browser && Router.push(\"/\");\n    } else {\n      // errors!\n      const error = await request.text();\n\n      context.setErrors({\n        general:\n          error ||\n          \"There was a problem authenticating you with that email and password combination.\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"page\" style={{backgroundColor: \"#fffff0\"}}>\n        <Formik\n          initialValues={{\n            name: \"\",\n            email: \"\",\n            password: \"\",\n          }}\n          validationSchema={SignupSchema(isSignUp)}\n          onSubmit={handleSubmit}\n        >\n          {({\n            errors,\n            touched,\n            values,\n            isSubmitting,\n            isValid,\n            getFieldProps,\n          }) => (\n            <Form>\n              <div className=\"form\">\n                {isSignUp && (\n                  <Field>\n                    <Label htmlFor=\"name\" error={touched.name && errors.name}>\n                      👩‍💻 Name\n                    </Label>\n                    <Input\n                      name=\"name\"\n                      id=\"name\"\n                      type=\"text\"\n                      {...getFieldProps(\"name\")}\n                    />\n                  </Field>\n                )}\n                <Field>\n                  <Label htmlFor=\"email\" error={touched.email && errors.email}>\n                    ✉️ Email\n                  </Label>\n                  <Input\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    {...getFieldProps(\"email\")}\n                  />\n                </Field>\n                <Field>\n                  <Label\n                    htmlFor=\"password\"\n                    error={touched.password && errors.password}\n                  >\n                    🔑 Password\n                  </Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    name=\"password\"\n                    {...getFieldProps(\"password\")}\n                  />\n                </Field>\n                <Button\n                  disabled={isSubmitting || !isValid}\n                  loading={isSubmitting}\n                >\n                  {isSignUp ? \"Sign up\" : \"Log in\"}\n                </Button>\n                <p className=\"error\">{errors?.general}</p>{\" \"}\n              </div>\n            </Form>\n          )}\n        </Formik>\n        <p className=\"log-in-prompt\">\n          {isSignUp ? \"Have\" : \"Need\"} an account?\n          <span className=\"small\">\n            Click below, fill out the form, et vola!\n          </span>\n        </p>\n        <Button onClick={() => setIsSignUp(!isSignUp)}>\n          {isSignUp ? \"Log in\" : \"Sign up\"}\n        </Button>\n      </div>\n      <style jsx>{`\n        .error {\n          text-align: center;\n          color: var(--error);\n        }\n        .page {\n          width: 100%;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n        .log-in-prompt {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          margin-top: 0.25rem;\n        }\n        .log-in-prompt > .small {\n          font-size: 0.75rem;\n          opacity: 0.6;\n        }\n        .form {\n          display: flex;\n          flex-direction: column;\n          width: 300px;\n        }\n        .form > :global(.field),\n        .form > :global(.btn) {\n          margin-bottom: 0.5rem;\n        }\n      `}</style>\n    </>\n  );\n};"]},"metadata":{},"sourceType":"module"}