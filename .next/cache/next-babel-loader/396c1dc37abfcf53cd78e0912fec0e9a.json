{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/AnnotationList/AnnotationItem/AnnotationItem.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { Button, Collapse, Badge, ListGroupItem } from 'reactstrap';\nimport { MdCallSplit, MdDelete } from 'react-icons/md';\nimport { FaChevronDown, FaChevronUp } from 'react-icons/fa';\nimport { IoMdEyeOff, IoMdEye } from 'react-icons/io';\nimport { SPLIT, HIDE, SHOW } from '/Applications/CrowdMOT/crowdmot-nextjs/components/models/2DVideo.js';\nimport IncidentList from '../../IncidentList/IncidentList.jsx';\nimport TwoDimensionalVideoContext from '../../TwoDimensionalVideo/twoDimensionalVideoContext';\nimport OpenDialogButton from '../../OpenDialogButton/OpenDialogButton.jsx';\nimport { isDialogDisabledConst } from '../isDialogDisabledReducer';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './annotationItem.scss';\n\nvar AnnotationItem = function AnnotationItem(_ref) {\n  _s();\n\n  var className = _ref.className,\n      itemData = _ref.itemData,\n      isDialogDisabled = _ref.isDialogDisabled,\n      dispatchIsDialogDisabled = _ref.dispatchIsDialogDisabled;\n  var twoDimensionalVideoContext = useContext(TwoDimensionalVideoContext);\n  var played = twoDimensionalVideoContext.played,\n      entities = twoDimensionalVideoContext.entities,\n      focusing = twoDimensionalVideoContext.focusing,\n      isEmptyCheckEnable = twoDimensionalVideoContext.isEmptyCheckEnable,\n      isSplitEnable = twoDimensionalVideoContext.isSplitEnable,\n      isShowHideEnable = twoDimensionalVideoContext.isShowHideEnable,\n      emptyCheckAnnotationItemWarningText = twoDimensionalVideoContext.emptyCheckAnnotationItemWarningText,\n      onAnnotationItemClick = twoDimensionalVideoContext.onAnnotationItemClick,\n      onAnnotationDeleteClick = twoDimensionalVideoContext.onAnnotationDeleteClick,\n      onAnnotationShowHideClick = twoDimensionalVideoContext.onAnnotationShowHideClick,\n      onAnnotationSplitClick = twoDimensionalVideoContext.onAnnotationSplitClick;\n\n  var _useState = useState(false),\n      isIncidentListOpen = _useState[0],\n      setIsIncidentListOpen = _useState[1];\n\n  var _useTranslation = useTranslation('twoDimensionalVideo'),\n      t = _useTranslation.t;\n\n  var incidents = itemData.incidents,\n      name = itemData.name,\n      label = itemData.label,\n      color = itemData.color,\n      parentName = itemData.parentName,\n      childrenNames = itemData.childrenNames;\n  var parentAnnotation = entities.annotations[parentName];\n  var childrenUI = childrenNames.map(function (c) {\n    return __jsx(Button, {\n      color: \"link\",\n      key: c,\n      onClick: function onClick() {\n        return onAnnotationItemClick(c);\n      },\n      className: \"video-ann-relatives\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 3\n      }\n    }, \"\".concat(entities.annotations[c].label, \" \"));\n  });\n\n  var showButtonUI = __jsx(OpenDialogButton, {\n    className: \"d-flex align-items-center annotation-item__control-button\",\n    outline: true,\n    title: t('dialogTitleShow'),\n    message: t('dialogMessageShow'),\n    isDialogDisabled: isDialogDisabled.show,\n    onYesClick: function onYesClick() {\n      return onAnnotationShowHideClick({\n        name: name,\n        status: SHOW\n      });\n    },\n    onDontShowAgainChange: function onDontShowAgainChange(e) {\n      return dispatchIsDialogDisabled({\n        type: isDialogDisabledConst.SHOW,\n        value: e.target.checked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, __jsx(IoMdEye, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }\n  }), SHOW);\n\n  var hideButtonUI = __jsx(OpenDialogButton, {\n    className: \"d-flex align-items-center annotation-item__control-button\",\n    outline: true,\n    title: t('dialogTitleHide'),\n    message: t('dialogMessageHide'),\n    isDialogDisabled: isDialogDisabled.hide,\n    onYesClick: function onYesClick() {\n      return onAnnotationShowHideClick({\n        name: name,\n        status: HIDE\n      });\n    },\n    onDontShowAgainChange: function onDontShowAgainChange(e) {\n      return dispatchIsDialogDisabled({\n        type: isDialogDisabledConst.HIDE,\n        value: e.target.checked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 3\n    }\n  }, __jsx(IoMdEyeOff, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }), HIDE);\n\n  var splitButtonUI = __jsx(OpenDialogButton, {\n    className: \"d-flex align-items-center annotation-item__control-button\",\n    outline: true,\n    title: t('dialogTitleSplit'),\n    message: t('dialogMessageSplit'),\n    isDialogDisabled: isDialogDisabled.split,\n    onYesClick: function onYesClick() {\n      return onAnnotationSplitClick(name);\n    },\n    onDontShowAgainChange: function onDontShowAgainChange(e) {\n      return dispatchIsDialogDisabled({\n        type: isDialogDisabledConst.HIDE,\n        value: e.target.checked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }\n  }, __jsx(MdCallSplit, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }\n  }), SPLIT);\n\n  var currentIncident = _toConsumableArray(incidents).reverse().find(function (incident) {\n    return played >= incident.time;\n  }) || {};\n\n  switch (currentIncident.status) {\n    case SHOW:\n      showButtonUI = null;\n      break;\n\n    case HIDE:\n      hideButtonUI = null;\n      splitButtonUI = null;\n      break;\n\n    case SPLIT:\n      showButtonUI = null;\n      hideButtonUI = null;\n      break;\n\n    default:\n      showButtonUI = null;\n      hideButtonUI = null;\n      splitButtonUI = null;\n      break;\n  }\n\n  var warningText = isEmptyCheckEnable && incidents.length < 2 && __jsx(\"span\", {\n    className: \"text-danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 68\n    }\n  }, emptyCheckAnnotationItemWarningText);\n\n  var rootClassName = \"annotation-item\".concat(className ? \" \".concat(className) : '');\n\n  if (name !== focusing) {\n    return __jsx(ListGroupItem, {\n      className: rootClassName,\n      name: name,\n      onClick: function onClick() {\n        return onAnnotationItemClick(name);\n      },\n      action: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 4\n      }\n    }, __jsx(\"div\", {\n      className: \"d-flex w-100 justify-content-between align-items-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 6\n      }\n    }, label)), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 5\n      }\n    }, warningText));\n  }\n\n  rootClassName = \"\".concat(rootClassName, \" annotation-item--highlight\");\n  return __jsx(ListGroupItem, {\n    className: rootClassName,\n    name: name,\n    style: {\n      borderColor: color.replace(/,1\\)/, ',.3)')\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center mb-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 4\n    }\n  }, __jsx(\"div\", {\n    className: \"mr-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 30\n    }\n  }, label)), isSplitEnable && splitButtonUI, isShowHideEnable && hideButtonUI, showButtonUI, __jsx(OpenDialogButton, {\n    className: \"d-flex align-items-center annotation-item__delete-button\",\n    color: \"link\",\n    title: t('dialogTitleDelete'),\n    message: t('dialogMessageDelete'),\n    isDialogDisabled: isDialogDisabled[\"delete\"],\n    onYesClick: function onYesClick() {\n      return onAnnotationDeleteClick(name);\n    },\n    onDontShowAgainChange: function onDontShowAgainChange(e) {\n      return dispatchIsDialogDisabled({\n        type: isDialogDisabledConst.DELETE,\n        value: e.target.checked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, __jsx(MdDelete, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 6\n    }\n  }))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }\n  }, parentAnnotation && __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 6\n    }\n  }, __jsx(Badge, {\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, t('annotationItemParent')), __jsx(Button, {\n    color: \"link\",\n    onClick: function onClick() {\n      return onAnnotationItemClick(parentAnnotation.name);\n    },\n    className: \"annotation-item__parent-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, parentAnnotation.label))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 4\n    }\n  }, childrenUI.length > 0 && __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 6\n    }\n  }, __jsx(Badge, {\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, t('annotationItemChildren')), childrenUI)), __jsx(Button, {\n    color: \"link\",\n    className: \"d-flex align-items-center justify-content-between incident-list-toggle-button p-3 mt-2\",\n    onClick: function onClick() {\n      return setIsIncidentListOpen(!isIncidentListOpen);\n    },\n    style: {\n      marginBottom: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 4\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, t('annotationItemIncidentHistory')), isIncidentListOpen ? __jsx(FaChevronUp, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 27\n    }\n  }) : __jsx(FaChevronDown, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 45\n    }\n  })), __jsx(Collapse, {\n    isOpen: isIncidentListOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }\n  }, __jsx(IncidentList, {\n    incidents: incidents,\n    annotationName: name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }\n  })), __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 4\n    }\n  }, warningText));\n};\n\n_s(AnnotationItem, \"9hZzYjUYYc0/OwzRtKTl1EXvkME=\", false, function () {\n  return [useTranslation];\n});\n\n_c = AnnotationItem;\nAnnotationItem.propTypes = {\n  className: PropTypes.string,\n  itemData: PropTypes.object,\n  dispatchIsDialogDisabled: PropTypes.func,\n  isDialogDisabled: PropTypes.object\n};\nAnnotationItem.defaultProps = {\n  className: '',\n  itemData: {},\n  dispatchIsDialogDisabled: function dispatchIsDialogDisabled() {},\n  isDialogDisabled: {}\n};\nexport default AnnotationItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"AnnotationItem\");","map":{"version":3,"sources":["/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/AnnotationList/AnnotationItem/AnnotationItem.jsx"],"names":["React","useState","useContext","PropTypes","useTranslation","Button","Collapse","Badge","ListGroupItem","MdCallSplit","MdDelete","FaChevronDown","FaChevronUp","IoMdEyeOff","IoMdEye","SPLIT","HIDE","SHOW","IncidentList","TwoDimensionalVideoContext","OpenDialogButton","isDialogDisabledConst","AnnotationItem","className","itemData","isDialogDisabled","dispatchIsDialogDisabled","twoDimensionalVideoContext","played","entities","focusing","isEmptyCheckEnable","isSplitEnable","isShowHideEnable","emptyCheckAnnotationItemWarningText","onAnnotationItemClick","onAnnotationDeleteClick","onAnnotationShowHideClick","onAnnotationSplitClick","isIncidentListOpen","setIsIncidentListOpen","t","incidents","name","label","color","parentName","childrenNames","parentAnnotation","annotations","childrenUI","map","c","showButtonUI","show","status","e","type","value","target","checked","hideButtonUI","hide","splitButtonUI","split","currentIncident","reverse","find","incident","time","warningText","length","rootClassName","borderColor","replace","DELETE","marginBottom","propTypes","string","object","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport {\n\tButton, Collapse, Badge, ListGroupItem,\n} from 'reactstrap';\nimport { MdCallSplit, MdDelete } from 'react-icons/md';\nimport { FaChevronDown, FaChevronUp } from 'react-icons/fa';\nimport { IoMdEyeOff, IoMdEye } from 'react-icons/io';\nimport { SPLIT, HIDE, SHOW } from '/Applications/CrowdMOT/crowdmot-nextjs/components/models/2DVideo.js';\nimport IncidentList from '../../IncidentList/IncidentList.jsx';\nimport TwoDimensionalVideoContext from '../../TwoDimensionalVideo/twoDimensionalVideoContext';\nimport OpenDialogButton from '../../OpenDialogButton/OpenDialogButton.jsx';\nimport { isDialogDisabledConst } from '../isDialogDisabledReducer';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './annotationItem.scss';\n\nconst AnnotationItem = ({\n\tclassName,\n\titemData,\n\tisDialogDisabled,\n\tdispatchIsDialogDisabled,\n}) => {\n\tconst twoDimensionalVideoContext = useContext(TwoDimensionalVideoContext);\n\tconst {\n\t\tplayed,\n\t\tentities,\n\t\tfocusing,\n\t\tisEmptyCheckEnable,\n\t\tisSplitEnable,\n\t\tisShowHideEnable,\n\t\temptyCheckAnnotationItemWarningText,\n\t\tonAnnotationItemClick,\n\t\tonAnnotationDeleteClick,\n\t\tonAnnotationShowHideClick,\n\t\tonAnnotationSplitClick,\n\t} = twoDimensionalVideoContext;\n\tconst [isIncidentListOpen, setIsIncidentListOpen] = useState(false);\n\tconst { t } = useTranslation('twoDimensionalVideo');\n\n\tconst {\n\t\tincidents,\n\t\tname,\n\t\tlabel,\n\t\tcolor,\n\t\tparentName,\n\t\tchildrenNames,\n\t} = itemData;\n\tconst parentAnnotation = entities.annotations[parentName];\n\tconst childrenUI = childrenNames.map(c => (\n\t\t<Button color='link' key={ c } onClick={ () => onAnnotationItemClick(c) } className='video-ann-relatives'>\n\t\t\t{`${entities.annotations[c].label} `}\n\t\t\n\t\t</Button>\n\t));\n\tlet showButtonUI = (\n\t\t<OpenDialogButton\n\t\t\tclassName='d-flex align-items-center annotation-item__control-button'\n\t\t\toutline\n\t\t\ttitle={ t('dialogTitleShow') }\n\t\t\tmessage={ t('dialogMessageShow') }\n\t\t\tisDialogDisabled={ isDialogDisabled.show }\n\t\t\tonYesClick={ () => onAnnotationShowHideClick({ name, status: SHOW }) }\n\t\t\tonDontShowAgainChange={ e => dispatchIsDialogDisabled({ type: isDialogDisabledConst.SHOW, value: e.target.checked }) }\n\t\t>\n\t\t\t<IoMdEye />\n\t\t\t{SHOW}\n\n\t\t</OpenDialogButton>\n\t);\n\tlet hideButtonUI = (\n\t\t<OpenDialogButton\n\t\t\tclassName='d-flex align-items-center annotation-item__control-button'\n\t\t\toutline\n\t\t\ttitle={ t('dialogTitleHide') }\n\t\t\tmessage={ t('dialogMessageHide') }\n\t\t\tisDialogDisabled={ isDialogDisabled.hide }\n\t\t\tonYesClick={ () => onAnnotationShowHideClick({ name, status: HIDE }) }\n\t\t\tonDontShowAgainChange={ e => dispatchIsDialogDisabled({ type: isDialogDisabledConst.HIDE, value: e.target.checked }) }\n\t\t>\n\t\t\t<IoMdEyeOff />\n\t\t\t{HIDE}\n\t\t</OpenDialogButton>\n\t);\n\tlet splitButtonUI = (\n\t\t<OpenDialogButton\n\t\t\tclassName='d-flex align-items-center annotation-item__control-button'\n\t\t\toutline\n\t\t\ttitle={ t('dialogTitleSplit') }\n\t\t\tmessage={ t('dialogMessageSplit') }\n\t\t\tisDialogDisabled={ isDialogDisabled.split }\n\t\t\tonYesClick={ () => onAnnotationSplitClick(name) }\n\t\t\tonDontShowAgainChange={ e => dispatchIsDialogDisabled({ type: isDialogDisabledConst.HIDE, value: e.target.checked }) }\n\t\t>\n\t\t\t<MdCallSplit />\n\t\t\t{SPLIT}\n\t\t</OpenDialogButton>\n\t);\n\tconst currentIncident = [...incidents].reverse().find(incident => played >= incident.time) || {};\n\n\tswitch (currentIncident.status) {\n\tcase SHOW:\n\t\tshowButtonUI = null;\n\t\tbreak;\n\tcase HIDE:\n\t\thideButtonUI = null;\n\t\tsplitButtonUI = null;\n\t\tbreak;\n\tcase SPLIT:\n\t\tshowButtonUI = null;\n\t\thideButtonUI = null;\n\t\tbreak;\n\tdefault:\n\t\tshowButtonUI = null;\n\t\thideButtonUI = null;\n\t\tsplitButtonUI = null;\n\t\tbreak;\n\t}\n\n\tconst warningText = isEmptyCheckEnable && incidents.length < 2 && <span className='text-danger'>{emptyCheckAnnotationItemWarningText}</span>;\n\tlet rootClassName = `annotation-item${className ? ` ${className}` : ''}`;\n\tif (name !== focusing) {\n\t\treturn (\n\t\t\t<ListGroupItem\n\t\t\t\tclassName={ rootClassName }\n\t\t\t\tname={ name }\n\t\t\t\tonClick={ () => onAnnotationItemClick(name) }\n\t\t\t\taction\n\t\t\t>\n\t\t\t\t<div className='d-flex w-100 justify-content-between align-items-center'>\n\t\t\t\t\t<div>{label}</div>\n\t\t\t\t</div>\n\t\t\t\t<div>{warningText}</div>\n\t\t\t</ListGroupItem>\n\t\t);\n\t}\n\n\trootClassName = `${rootClassName} annotation-item--highlight`;\n\treturn (\n\t\t<ListGroupItem\n\t\t\tclassName={ rootClassName }\n\t\t\tname={ name }\n\t\t\tstyle={ { borderColor: color.replace(/,1\\)/, ',.3)') } }\n\t\t>\n\t\t\t<div className='d-flex align-items-center mb-2'>\n\t\t\t\t<div className='mr-auto'><strong>{label}</strong></div>\n\t\t\t\t{isSplitEnable && splitButtonUI}\n\t\t\t\t{isShowHideEnable && hideButtonUI}\n\t\t\t\t{showButtonUI}\n\t\t\t\t<OpenDialogButton\n\t\t\t\t\tclassName='d-flex align-items-center annotation-item__delete-button'\n\t\t\t\t\tcolor='link'\n\t\t\t\t\ttitle={ t('dialogTitleDelete') }\n\t\t\t\t\tmessage={ t('dialogMessageDelete') }\n\t\t\t\t\tisDialogDisabled={ isDialogDisabled.delete }\n\t\t\t\t\tonYesClick={ () => onAnnotationDeleteClick(name) }\n\t\t\t\t\tonDontShowAgainChange={ e => dispatchIsDialogDisabled({ type: isDialogDisabledConst.DELETE, value: e.target.checked }) }\n\t\t\t\t>\n\t\t\t\t\t<MdDelete />\n\t\t\t\t</OpenDialogButton>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{parentAnnotation && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Badge color='secondary'>{ t('annotationItemParent') }</Badge>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tcolor='link'\n\t\t\t\t\t\t\tonClick={ () => onAnnotationItemClick(parentAnnotation.name) }\n\t\t\t\t\t\t\tclassName='annotation-item__parent-button'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{parentAnnotation.label}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{childrenUI.length > 0 && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Badge color='secondary'>{ t('annotationItemChildren') }</Badge>\n\t\t\t\t\t\t{childrenUI}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Button\n\t\t\t\tcolor='link'\n\t\t\t\tclassName='d-flex align-items-center justify-content-between incident-list-toggle-button p-3 mt-2'\n\t\t\t\tonClick={ () => setIsIncidentListOpen(!isIncidentListOpen) }\n\t\t\t\tstyle={ { marginBottom: 0 } }\n\t\t\t>\n\t\t\t\t<div>{ t('annotationItemIncidentHistory') }</div>\n\t\t\t\t{isIncidentListOpen ? <FaChevronUp /> : <FaChevronDown />}\n\t\t\t</Button>\n\t\t\t<Collapse isOpen={ isIncidentListOpen }>\n\t\t\t\t<IncidentList incidents={ incidents } annotationName={ name } />\n\t\t\t</Collapse>\n\t\t\t<div className='mt-3'>\n\t\t\t\t{warningText}\n\t\t\t</div>\n\t\t</ListGroupItem>\n\t);\n};\n\nAnnotationItem.propTypes = {\n\tclassName: PropTypes.string,\n    itemData: PropTypes.object,\n\tdispatchIsDialogDisabled: PropTypes.func,\n\tisDialogDisabled: PropTypes.object,\n};\nAnnotationItem.defaultProps = {\n\tclassName: '',\n\titemData: {},\n\tdispatchIsDialogDisabled: () => {},\n\tisDialogDisabled: {},\n};\nexport default AnnotationItem;\n"]},"metadata":{},"sourceType":"module"}