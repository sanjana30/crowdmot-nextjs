{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/Canvas/ResizingAnchor/ResizingAnchor.jsx\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Rect } from 'react-konva';\n\nvar handleMouseOver = function handleMouseOver(e, isManipulatable) {\n  if (!isManipulatable) return;\n  var activeAnchor = e.target;\n\n  switch (activeAnchor.getName()) {\n    case 'topLeft':\n    case 'bottomRight':\n      document.body.style.cursor = 'nwse-resize';\n      break;\n\n    case 'topRight':\n    case 'bottomLeft':\n      document.body.style.cursor = 'nesw-resize';\n      break;\n\n    case 'top':\n    case 'bottom':\n      document.body.style.cursor = 'ns-resize';\n      break;\n\n    case 'left':\n    case 'right':\n      document.body.style.cursor = 'ew-resize';\n      break;\n\n    default:\n      break;\n  }\n};\n\nvar handleMouseDown = function handleMouseDown(e, isManipulatable, onMouseDown) {\n  if (!isManipulatable) return;\n  var group = e.target.findAncestor('Group');\n  group.draggable(false);\n  group.moveToTop();\n  e.target.moveToTop();\n  onMouseDown(e);\n};\n\nvar handleDragMove = function handleDragMove(e, canvasWidth, canvasHeight) {\n  var activeAnchor = e.target;\n  var group = activeAnchor.getParent();\n  var topLeft = group.get('.topLeft')[0];\n  var topRight = group.get('.topRight')[0];\n  var bottomRight = group.get('.bottomRight')[0];\n  var bottomLeft = group.get('.bottomLeft')[0];\n  var top = group.get('.top')[0];\n  var left = group.get('.left')[0];\n  var right = group.get('.right')[0];\n  var bottom = group.get('.bottom')[0];\n  var rect = group.get('Rect')[0];\n  var text = group.get('Text')[0];\n  var resizedWidth;\n  var resizedHeight; // set box resizing boundary\n\n  var absX = activeAnchor.getAbsolutePosition().x;\n  var absY = activeAnchor.getAbsolutePosition().y;\n  absX = absX < 0 ? 0 : absX;\n  absY = absY < 0 ? 0 : absY;\n  absX = absX > canvasWidth ? canvasWidth : absX;\n  absY = absY > canvasHeight ? canvasHeight : absY;\n  activeAnchor.setAbsolutePosition({\n    x: absX,\n    y: absY\n  });\n  var anchorX = activeAnchor.getX();\n  var anchorY = activeAnchor.getY(); // update anchor positions\n\n  switch (activeAnchor.getName()) {\n    case 'topLeft':\n      topRight.y(anchorY);\n      top.y(anchorY);\n      bottomLeft.x(anchorX);\n      left.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      top.x(anchorX + resizedWidth / 2);\n      left.y(anchorY + resizedHeight / 2);\n      right.y(anchorY + resizedHeight / 2);\n      bottom.x(anchorX + resizedWidth / 2);\n      text.x(anchorX);\n      text.y(anchorY);\n      break;\n\n    case 'topRight':\n      topLeft.y(anchorY);\n      top.y(anchorY);\n      bottomRight.x(anchorX);\n      right.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      top.x(anchorX - resizedWidth / 2);\n      left.y(anchorY + resizedHeight / 2);\n      right.y(anchorY + resizedHeight / 2);\n      bottom.x(anchorX - resizedWidth / 2);\n      text.y(anchorY);\n      text.x(anchorX - resizedWidth);\n      break;\n\n    case 'bottomRight':\n      bottomLeft.y(anchorY);\n      bottom.y(anchorY);\n      topRight.x(anchorX);\n      right.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      top.x(anchorX - resizedWidth / 2);\n      left.y(anchorY - resizedHeight / 2);\n      right.y(anchorY - resizedHeight / 2);\n      bottom.x(anchorX - resizedWidth / 2);\n      text.x(anchorX - resizedWidth);\n      break;\n\n    case 'bottomLeft':\n      bottomRight.y(anchorY);\n      bottom.y(anchorY);\n      topLeft.x(anchorX);\n      left.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      top.x(anchorX + resizedWidth / 2);\n      left.y(anchorY - resizedHeight / 2);\n      right.y(anchorY - resizedHeight / 2);\n      bottom.x(anchorX + resizedWidth / 2);\n      text.x(anchorX);\n      break;\n\n    case 'top':\n      topLeft.y(anchorY);\n      topRight.y(anchorY);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      top.x(topLeft.x() + resizedWidth / 2);\n      left.y(anchorY + resizedHeight / 2);\n      right.y(anchorY + resizedHeight / 2);\n      text.y(anchorY);\n      break;\n\n    case 'left':\n      topLeft.x(anchorX);\n      bottomLeft.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      left.y(topLeft.y() + resizedHeight / 2);\n      top.x(anchorX + resizedWidth / 2);\n      bottom.x(anchorX + resizedWidth / 2);\n      text.x(anchorX);\n      break;\n\n    case 'right':\n      topRight.x(anchorX);\n      bottomRight.x(anchorX);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      right.y(topLeft.y() + resizedHeight / 2);\n      top.x(anchorX - resizedWidth / 2);\n      bottom.x(anchorX - resizedWidth / 2);\n      text.x(anchorX - resizedWidth);\n      break;\n\n    case 'bottom':\n      bottomLeft.y(anchorY);\n      bottomRight.y(anchorY);\n      resizedHeight = bottomRight.y() - topLeft.y();\n      resizedWidth = bottomRight.x() - topLeft.x();\n      bottom.x(topLeft.x() + resizedWidth / 2);\n      left.y(anchorY - resizedHeight / 2);\n      right.y(anchorY - resizedHeight / 2);\n      break;\n\n    default:\n      break;\n  }\n\n  group.x(topLeft.getAbsolutePosition().x);\n  group.y(topLeft.getAbsolutePosition().y);\n  topLeft.position({\n    x: 0,\n    y: 0\n  });\n  top.position({\n    x: resizedWidth / 2,\n    y: 0\n  });\n  topRight.position({\n    x: resizedWidth,\n    y: 0\n  });\n  left.position({\n    x: 0,\n    y: resizedHeight / 2\n  });\n  bottomLeft.position({\n    x: 0,\n    y: resizedHeight\n  });\n  right.position({\n    x: resizedWidth,\n    y: resizedHeight / 2\n  });\n  bottom.position({\n    x: resizedWidth / 2,\n    y: resizedHeight\n  });\n  bottomRight.position({\n    x: resizedWidth,\n    y: resizedHeight\n  });\n  rect.position(topLeft.position());\n  rect.width(resizedWidth);\n  rect.height(resizedHeight);\n  text.position({\n    x: 0,\n    y: 0\n  });\n};\n\nvar ResizingAnchor = function ResizingAnchor(_ref) {\n  var dotLength = _ref.dotLength,\n      color = _ref.color,\n      isManipulatable = _ref.isManipulatable,\n      x = _ref.x,\n      y = _ref.y,\n      name = _ref.name,\n      _onDragEnd = _ref.onDragEnd,\n      _onMouseDown = _ref.onMouseDown,\n      canvasWidth = _ref.canvasWidth,\n      canvasHeight = _ref.canvasHeight;\n  return __jsx(Rect, {\n    offsetX: dotLength / 2,\n    offsetY: dotLength / 2,\n    x: x,\n    y: y,\n    key: name,\n    name: name,\n    stroke: color,\n    fill: color,\n    strokeWidth: 0,\n    width: dotLength,\n    height: dotLength,\n    draggable: isManipulatable,\n    dragOnTop: false,\n    onDragMove: function onDragMove(e) {\n      return handleDragMove(e, canvasWidth, canvasHeight);\n    },\n    onMouseDown: function onMouseDown(e) {\n      return handleMouseDown(e, isManipulatable, _onMouseDown);\n    },\n    onDragEnd: function onDragEnd(e) {\n      document.body.style.cursor = 'default';\n\n      _onDragEnd(e);\n    },\n    onMouseOver: function onMouseOver(e) {\n      return handleMouseOver(e, isManipulatable);\n    },\n    onMouseOut: function onMouseOut() {\n      document.body.style.cursor = 'default';\n    },\n    onFocus: function onFocus() {},\n    onBlur: function onBlur() {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 2\n    }\n  });\n};\n\nResizingAnchor.propTypes = {\n  dotLength: PropTypes.number,\n  color: PropTypes.string,\n  canvasWidth: PropTypes.number,\n  canvasHeight: PropTypes.number,\n  isManipulatable: PropTypes.bool,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  name: PropTypes.string,\n  onDragEnd: PropTypes.func,\n  onMouseDown: PropTypes.func\n};\nResizingAnchor.defaultProps = {\n  dotLength: 6,\n  color: '#fff',\n  canvasWidth: 0,\n  canvasHeight: 0,\n  isManipulatable: true,\n  x: 0,\n  y: 0,\n  name: '',\n  onDragEnd: function onDragEnd() {},\n  onMouseDown: function onMouseDown() {}\n};\nexport default ResizingAnchor;","map":{"version":3,"sources":["/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/Canvas/ResizingAnchor/ResizingAnchor.jsx"],"names":["React","PropTypes","Rect","handleMouseOver","e","isManipulatable","activeAnchor","target","getName","document","body","style","cursor","handleMouseDown","onMouseDown","group","findAncestor","draggable","moveToTop","handleDragMove","canvasWidth","canvasHeight","getParent","topLeft","get","topRight","bottomRight","bottomLeft","top","left","right","bottom","rect","text","resizedWidth","resizedHeight","absX","getAbsolutePosition","x","absY","y","setAbsolutePosition","anchorX","getX","anchorY","getY","position","width","height","ResizingAnchor","dotLength","color","name","onDragEnd","propTypes","number","string","bool","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Rect } from 'react-konva';\n\n\nconst handleMouseOver = (e, isManipulatable) => {\n\tif (!isManipulatable) return;\n\tconst activeAnchor = e.target;\n\tswitch (activeAnchor.getName()) {\n\tcase 'topLeft':\n\tcase 'bottomRight':\n\t\tdocument.body.style.cursor = 'nwse-resize';\n\t\tbreak;\n\tcase 'topRight':\n\tcase 'bottomLeft':\n\t\tdocument.body.style.cursor = 'nesw-resize';\n\t\tbreak;\n\tcase 'top':\n\tcase 'bottom':\n\t\tdocument.body.style.cursor = 'ns-resize';\n\t\tbreak;\n\tcase 'left':\n\tcase 'right':\n\t\tdocument.body.style.cursor = 'ew-resize';\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n};\n\nconst handleMouseDown = (e, isManipulatable, onMouseDown) => {\n\tif (!isManipulatable) return;\n\tconst group = e.target.findAncestor('Group');\n\tgroup.draggable(false);\n\tgroup.moveToTop();\n\te.target.moveToTop();\n\tonMouseDown(e);\n};\n\nconst handleDragMove = (e, canvasWidth, canvasHeight) => {\n\tconst activeAnchor = e.target;\n\tconst group = activeAnchor.getParent();\n\tconst topLeft = group.get('.topLeft')[0]; const topRight = group.get('.topRight')[0]; const bottomRight = group.get('.bottomRight')[0]; const bottomLeft = group.get('.bottomLeft')[0];\n\tconst top = group.get('.top')[0]; const left = group.get('.left')[0]; const right = group.get('.right')[0]; const bottom = group.get('.bottom')[0];\n\tconst rect = group.get('Rect')[0];\n\tconst text = group.get('Text')[0];\n\tlet resizedWidth; let resizedHeight;\n\t// set box resizing boundary\n\tlet absX = activeAnchor.getAbsolutePosition().x;\n\tlet absY = activeAnchor.getAbsolutePosition().y;\n\tabsX = absX < 0 ? 0 : absX;\n\tabsY = absY < 0 ? 0 : absY;\n\tabsX = absX > canvasWidth ? canvasWidth : absX;\n\tabsY = absY > canvasHeight ? canvasHeight : absY;\n\tactiveAnchor.setAbsolutePosition({ x: absX, y: absY });\n\tconst anchorX = activeAnchor.getX();\n\tconst anchorY = activeAnchor.getY();\n\t// update anchor positions\n\tswitch (activeAnchor.getName()) {\n\tcase 'topLeft':\n\t\ttopRight.y(anchorY); top.y(anchorY); bottomLeft.x(anchorX); left.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\ttop.x(anchorX + resizedWidth / 2); left.y(anchorY + resizedHeight / 2); right.y(anchorY + resizedHeight / 2); bottom.x(anchorX + resizedWidth / 2);\n\t\ttext.x(anchorX); text.y(anchorY);\n\t\tbreak;\n\tcase 'topRight':\n\t\ttopLeft.y(anchorY); top.y(anchorY); bottomRight.x(anchorX); right.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\ttop.x(anchorX - resizedWidth / 2); left.y(anchorY + resizedHeight / 2); right.y(anchorY + resizedHeight / 2); bottom.x(anchorX - resizedWidth / 2);\n\t\ttext.y(anchorY); text.x(anchorX - resizedWidth);\n\t\tbreak;\n\tcase 'bottomRight':\n\t\tbottomLeft.y(anchorY); bottom.y(anchorY); topRight.x(anchorX); right.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\ttop.x(anchorX - resizedWidth / 2); left.y(anchorY - resizedHeight / 2); right.y(anchorY - resizedHeight / 2); bottom.x(anchorX - resizedWidth / 2);\n\t\ttext.x(anchorX - resizedWidth);\n\t\tbreak;\n\tcase 'bottomLeft':\n\t\tbottomRight.y(anchorY); bottom.y(anchorY); topLeft.x(anchorX); left.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\ttop.x(anchorX + resizedWidth / 2); left.y(anchorY - resizedHeight / 2); right.y(anchorY - resizedHeight / 2); bottom.x(anchorX + resizedWidth / 2);\n\t\ttext.x(anchorX);\n\t\tbreak;\n\tcase 'top':\n\t\ttopLeft.y(anchorY); topRight.y(anchorY);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\ttop.x(topLeft.x() + resizedWidth / 2);\n\t\tleft.y(anchorY + resizedHeight / 2); right.y(anchorY + resizedHeight / 2);\n\t\ttext.y(anchorY);\n\t\tbreak;\n\tcase 'left':\n\t\ttopLeft.x(anchorX); bottomLeft.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\tleft.y(topLeft.y() + resizedHeight / 2);\n\t\ttop.x(anchorX + resizedWidth / 2); bottom.x(anchorX + resizedWidth / 2);\n\t\ttext.x(anchorX);\n\t\tbreak;\n\tcase 'right':\n\t\ttopRight.x(anchorX); bottomRight.x(anchorX);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\tright.y(topLeft.y() + resizedHeight / 2);\n\t\ttop.x(anchorX - resizedWidth / 2); bottom.x(anchorX - resizedWidth / 2);\n\t\ttext.x(anchorX - resizedWidth);\n\t\tbreak;\n\tcase 'bottom':\n\t\tbottomLeft.y(anchorY); bottomRight.y(anchorY);\n\t\tresizedHeight = bottomRight.y() - topLeft.y();\n\t\tresizedWidth = bottomRight.x() - topLeft.x();\n\t\tbottom.x(topLeft.x() + resizedWidth / 2);\n\t\tleft.y(anchorY - resizedHeight / 2); right.y(anchorY - resizedHeight / 2);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\tgroup.x(topLeft.getAbsolutePosition().x);\n\tgroup.y(topLeft.getAbsolutePosition().y);\n\ttopLeft.position({ x: 0, y: 0 });\n\ttop.position({ x: resizedWidth / 2, y: 0 });\n\ttopRight.position({ x: resizedWidth, y: 0 });\n\tleft.position({ x: 0, y: resizedHeight / 2 });\n\tbottomLeft.position({ x: 0, y: resizedHeight });\n\tright.position({ x: resizedWidth, y: resizedHeight / 2 });\n\tbottom.position({ x: resizedWidth / 2, y: resizedHeight });\n\tbottomRight.position({ x: resizedWidth, y: resizedHeight });\n\trect.position(topLeft.position());\n\trect.width(resizedWidth);\n\trect.height(resizedHeight);\n\ttext.position({ x: 0, y: 0 });\n};\n\nconst ResizingAnchor = ({\n\tdotLength,\n\tcolor,\n\tisManipulatable,\n\tx,\n\ty,\n\tname,\n\tonDragEnd,\n\tonMouseDown,\n\tcanvasWidth,\n\tcanvasHeight,\n}) => (\n\t<Rect\n\t\toffsetX={ dotLength / 2 }\n\t\toffsetY={ dotLength / 2 }\n\t\tx={ x }\n\t\ty={ y }\n\t\tkey={ name }\n\t\tname={ name }\n\t\tstroke={ color }\n\t\tfill={ color }\n\t\tstrokeWidth={ 0 }\n\t\twidth={ dotLength }\n\t\theight={ dotLength }\n\t\tdraggable={ isManipulatable }\n\t\tdragOnTop={ false }\n\t\tonDragMove={ e => handleDragMove(e, canvasWidth, canvasHeight) }\n\t\tonMouseDown={ e => handleMouseDown(e, isManipulatable, onMouseDown) }\n\t\tonDragEnd={ (e) => {\n\t\t\tdocument.body.style.cursor = 'default';\n\t\t\tonDragEnd(e);\n\t\t} }\n\t\tonMouseOver={ e => handleMouseOver(e, isManipulatable) }\n\t\tonMouseOut={ () => {\n\t\t\tdocument.body.style.cursor = 'default';\n\t\t} }\n\t\tonFocus={ () => {} }\n\t\tonBlur={ () => {} }\n\t/>\n);\n\nResizingAnchor.propTypes = {\n\tdotLength: PropTypes.number,\n\tcolor: PropTypes.string,\n\tcanvasWidth: PropTypes.number,\n\tcanvasHeight: PropTypes.number,\n\tisManipulatable: PropTypes.bool,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tname: PropTypes.string,\n\tonDragEnd: PropTypes.func,\n\tonMouseDown: PropTypes.func,\n};\nResizingAnchor.defaultProps = {\n\tdotLength: 6,\n\tcolor: '#fff',\n\tcanvasWidth: 0,\n\tcanvasHeight: 0,\n\tisManipulatable: true,\n\tx: 0,\n\ty: 0,\n\tname: '',\n\tonDragEnd: () => {},\n\tonMouseDown: () => {},\n};\nexport default ResizingAnchor;\n"]},"metadata":{},"sourceType":"module"}