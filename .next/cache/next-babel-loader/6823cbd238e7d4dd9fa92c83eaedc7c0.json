{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/TwoDimensionalVideo/TwoDimensionalVideo.jsx\";\nvar __jsx = React.createElement;\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { I18nextProvider, Translation } from 'react-i18next';\nimport { normalize, denormalize, schema } from 'normalizr';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { MdRedo, MdUndo, MdAdd } from 'react-icons/md';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport PopupDialog from 'shared/components/PopupDialog/PopupDialog.jsx';\nimport { highContrastingColors as colors } from 'shared/utils/colorUtils';\nimport { getRandomInt, getFixedNumber } from 'shared/utils/mathUtils';\nimport { UndoRedo } from '/Applications/CrowdMOT/crowdmot-nextjs/components/models/UndoRedo.js';\nimport i18nextInstance from './i18n';\nimport { Rectangle } from '../../models/rectangle';\nimport { Incident, SPLIT, HIDE, SHOW } from '../../models/incident';\nimport TwoDimensionalVideoContext from './twoDimensionalVideoContext';\nimport { getInterpolatedData, INTERPOLATION_TYPE } from '../../utils/interpolationUtils';\nimport Preview from '../Preview/Preview.jsx';\nimport Review from '../Review/Review.jsx';\nimport AnnotationList from '../AnnotationList/AnnotationList.jsx';\nimport DrawableVideoPlayer from '../DrawableVideoPlayer/DrawableVideoPlayer.jsx';\nimport { getLastAnnotationLabel, getUniqueKey } from '../../utils/utils';\nimport './twoDimensionalVideo.scss';\n\nvar randomColor = require('randomcolor');\n\nvar TwoDimensionalVideo = /*#__PURE__*/function (_Component) {\n  _inherits(TwoDimensionalVideo, _Component);\n\n  var _super = _createSuper(TwoDimensionalVideo);\n\n  function TwoDimensionalVideo(props) {\n    var _this;\n\n    _classCallCheck(this, TwoDimensionalVideo);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"buttonStyles\", {\n      marginLeft: 5\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePlayerRef\", function (player) {\n      _this.player = player;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoReady\", function () {\n      _this.setState({\n        annotationHeight: document.getElementById('react-player').children[0].clientHeight\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoProgress\", function (state) {\n      var played = state.played;\n\n      _this.setState(function (prevState) {\n        if (prevState.isSeeking) return null;\n        return {\n          played: getFixedNumber(played, 5)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoDuration\", function (duration) {\n      _this.setState({\n        duration: duration\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoEnded\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isPlaying: prevState.isLoop\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoRewind\", function () {\n      _this.setState({\n        isPlaying: false,\n        played: 0\n      });\n\n      _this.player.seekTo(0);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoPlayPause\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isPlaying: !prevState.isPlaying\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSpeedChange\", function (s) {\n      _this.setState({\n        playbackRate: s\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSliderMouseUp\", function () {\n      _this.setState({\n        isSeeking: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSliderMouseDown\", function () {\n      _this.setState({\n        isPlaying: false,\n        isSeeking: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSliderChange\", function (e) {\n      var played = getFixedNumber(e.target.value, 5);\n\n      _this.setState(function (prevState) {\n        var entities = prevState.entities;\n        var focusing = prevState.focusing;\n\n        if (focusing) {\n          var incidents = entities.annotations[focusing].incidents;\n\n          for (var i = 0; i < incidents.length; i += 1) {\n            if (played >= incidents[i].time) {\n              if (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n              if (incidents[i].status !== SHOW) focusing = '';\n              break;\n            } else if (i === incidents.length - 1) focusing = '';\n          }\n        }\n\n        return {\n          played: played,\n          focusing: focusing\n        };\n      }, function () {\n        _this.player.seekTo(played);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCanvasStageMouseDown\", function (e) {\n      var isAdding = _this.state.isAdding;\n      if (!isAdding) return;\n      var stage = e.target.getStage();\n      var position = stage.getPointerPosition();\n      var uniqueKey = getUniqueKey();\n      var color = colors[getRandomInt(colors.length)]; // const color = randomColor({\n      // \tluminosity: 'light',\n      // \tformat: 'rgba' // e.g. 'rgba(9, 1, 107, 0.6482447960879654)'\n      // });\n\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(_objectSpread(_objectSpread({}, prevState), {}, {\n          isAdding: false\n        })); // Undo/Redo\n\n\n        var annotations = prevState.annotations,\n            entities = prevState.entities;\n        var incidents = [];\n        incidents.push(Incident({\n          id: \"\".concat(uniqueKey),\n          name: \"\".concat(uniqueKey),\n          x: position.x,\n          y: position.y,\n          height: 1,\n          width: 1,\n          time: prevState.played\n        }));\n        entities.annotations[\"\".concat(uniqueKey)] = Rectangle({\n          id: \"\".concat(uniqueKey),\n          name: \"\".concat(uniqueKey),\n          label: \"\".concat(getLastAnnotationLabel(annotations, entities) + 1),\n          color: color,\n          incidents: incidents\n        });\n        return {\n          isAdding: false,\n          focusing: \"\".concat(uniqueKey),\n          annotations: [].concat(_toConsumableArray(annotations), [\"\".concat(uniqueKey)]),\n          entities: _objectSpread(_objectSpread({}, entities), {}, {\n            annotations: entities.annotations\n          })\n        };\n      }, function () {\n        var group = stage.find(\".\".concat(uniqueKey))[0];\n        var bottomRight = group.get('.bottomRight')[0];\n        group.moveToTop();\n        bottomRight.moveToTop();\n        bottomRight.startDrag();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCanvasGroupMouseDown\", function (e) {\n      var group = e.target.findAncestor('Group');\n\n      _this.setState({\n        isPlaying: false,\n        focusing: group.name()\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCanvasGroupDragEnd\", function (e) {\n      if (e.target.getClassName() !== 'Group') return;\n      var group = e.target;\n      var rect = group.get('Rect')[0];\n      var position = group.position();\n      var uniqueKey = getUniqueKey();\n\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(prevState);\n\n        var entities = prevState.entities,\n            played = prevState.played;\n        var incidents = entities.annotations[group.name()].incidents;\n\n        for (var i = 0; i < incidents.length; i += 1) {\n          if (played >= incidents[i].time) {\n            // skip elapsed incidents\n            if (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\n            if (played === incidents[i].time) {\n              incidents[i].x = position.x;\n              incidents[i].y = position.y;\n              incidents[i].width = rect.width();\n              incidents[i].height = rect.height();\n              break;\n            }\n\n            if (i === incidents.length - 1) {\n              incidents.push(Incident({\n                id: \"\".concat(uniqueKey),\n                name: \"\".concat(uniqueKey),\n                x: position.x,\n                y: position.y,\n                width: rect.width(),\n                height: rect.height(),\n                time: played\n              }));\n              break;\n            }\n\n            incidents.splice(i + 1, 0, Incident({\n              id: \"\".concat(uniqueKey),\n              name: \"\".concat(uniqueKey),\n              x: position.x,\n              y: position.y,\n              height: rect.height(),\n              width: rect.width(),\n              time: played\n            }));\n            break;\n          }\n        }\n\n        return {};\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCanvasDotMouseDown\", function (e) {\n      var group = e.target.findAncestor('Group');\n\n      _this.setState({\n        focusing: group.name()\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCanvasDotDragEnd\", function (e) {\n      var activeAnchor = e.target;\n      var group = activeAnchor.getParent();\n      var uniqueKey = getUniqueKey();\n      group.draggable(true);\n      var topLeft = group.get('.topLeft')[0];\n      var topRight = group.get('.topRight')[0];\n      var bottomRight = group.get('.bottomRight')[0];\n      var bottomLeft = group.get('.bottomLeft')[0];\n      var maxX = Math.max(topLeft.getAbsolutePosition().x, topRight.getAbsolutePosition().x, bottomRight.getAbsolutePosition().x, bottomLeft.getAbsolutePosition().x);\n      var minX = Math.min(topLeft.getAbsolutePosition().x, topRight.getAbsolutePosition().x, bottomRight.getAbsolutePosition().x, bottomLeft.getAbsolutePosition().x);\n      var maxY = Math.max(topLeft.getAbsolutePosition().y, topRight.getAbsolutePosition().y, bottomRight.getAbsolutePosition().y, bottomLeft.getAbsolutePosition().y);\n      var minY = Math.min(topLeft.getAbsolutePosition().y, topRight.getAbsolutePosition().y, bottomRight.getAbsolutePosition().y, bottomLeft.getAbsolutePosition().y);\n\n      _this.setState(function (prevState, props) {\n        _this.UndoRedoState.save(prevState);\n\n        var entities = prevState.entities,\n            played = prevState.played;\n        var annotations = entities.annotations;\n        var incidents = entities.annotations[group.name()].incidents;\n\n        for (var i = 0; i < incidents.length; i += 1) {\n          if (played >= incidents[i].time) {\n            // skip elapsed incidents\n            if (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\n            if (played === incidents[i].time) {\n              incidents[i].x = minX;\n              incidents[i].y = minY;\n              incidents[i].height = maxY - minY;\n              incidents[i].width = maxX - minX;\n              break;\n            }\n\n            incidents.splice(i + 1, 0, Incident({\n              id: \"\".concat(uniqueKey),\n              name: \"\".concat(uniqueKey),\n              x: minX,\n              y: minY,\n              height: maxY - minY,\n              width: maxX - minX,\n              time: played\n            }));\n            break;\n          }\n        }\n\n        annotations[group.name()].incidents = incidents;\n        return {\n          entities: _objectSpread(_objectSpread({}, entities), {}, {\n            annotations: annotations\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAnnotationItemClick\", function (name) {\n      return _this.setState({\n        focusing: name\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleIncidentItemClick\", function (incident) {\n      var annotationName = incident.annotationName,\n          time = incident.time;\n\n      _this.setState({\n        isPlaying: false,\n        focusing: annotationName\n      }, function () {\n        _this.player.seekTo(parseFloat(time));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleIncidentItemDelete\", function (e) {\n      var annotationName = e.annotationName,\n          incidentName = e.incidentName;\n\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(prevState);\n\n        var entities = prevState.entities;\n        var annotations = entities.annotations;\n        var incidents = entities.annotations[annotationName].incidents.filter(function (t) {\n          if (t.name !== incidentName) return true;\n          return false;\n        });\n        annotations[annotationName].incidents = incidents;\n        return {\n          entities: _objectSpread(_objectSpread({}, entities), {}, {\n            annotations: annotations\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleListAnnotationDelete\", function (name) {\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(prevState);\n\n        var entities = prevState.entities,\n            annotations = prevState.annotations;\n        var entitiesAnnotations = entities.annotations;\n        var label = entitiesAnnotations[name].label; // reorder the list\n\n        if (!isNaN(label)) {\n          var lastLabel = getLastAnnotationLabel(annotations, entities);\n\n          if (\"\".concat(lastLabel) !== '1' && \"\".concat(lastLabel) !== label) {\n            var lastName = annotations.find(function (a) {\n              return entitiesAnnotations[a].label === \"\".concat(lastLabel);\n            });\n\n            _this.renameLabel(annotations, entitiesAnnotations, lastName, label);\n          }\n        } // remove name from the parent's childrenNames\n\n\n        if (entitiesAnnotations[name].parentName) {\n          var parent = entitiesAnnotations[entitiesAnnotations[name].parentName];\n          var i = parent.childrenNames.indexOf(name);\n\n          if (i !== -1) {\n            parent.childrenNames.splice(i, 1);\n            if (parent.childrenNames.length == 0 && parent.incidents[parent.incidents.length - 1].status === SPLIT) parent.incidents[parent.incidents.length - 1].status = SHOW;\n          }\n        } // remove all its children and itself recusively\n\n\n        _this.removeAnnotation(annotations, entitiesAnnotations, name);\n\n        return {\n          annotations: annotations,\n          entities: _objectSpread(_objectSpread({}, entities), {}, {\n            annotations: entitiesAnnotations\n          }),\n          focusing: ''\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeAnnotation\", function (annotations, entitiesAnnotations, name) {\n      if (entitiesAnnotations[name].childrenNames.length !== 0) {\n        entitiesAnnotations[name].childrenNames.forEach(function (c) {\n          _this.removeAnnotation(annotations, entitiesAnnotations, c);\n        });\n      }\n\n      delete entitiesAnnotations.name;\n      var i = annotations.indexOf(name);\n      annotations.splice(i, 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renameLabel\", function (annotations, entitiesAnnotations, name, label) {\n      if (entitiesAnnotations[name].childrenNames.length !== 0) {\n        entitiesAnnotations[name].childrenNames.forEach(function (c, index) {\n          _this.renameLabel(annotations, entitiesAnnotations, c, \"\".concat(label, \"-\").concat(index + 1));\n        });\n      }\n\n      entitiesAnnotations[name].label = label;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleListAnnotationShowHide\", function (e) {\n      console.log(e);\n      var name = e.name;\n      var status = e.status;\n      var uniqueKey = new Date().getTime().toString(36);\n\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(prevState);\n\n        var played = prevState.played,\n            entities = prevState.entities;\n        var incidents = entities.annotations[name].incidents;\n\n        for (var i = 0; i < incidents.length; i += 1) {\n          if (i === 0 && played < incidents[i].time) {\n            incidents.splice(0, 0, Incident({\n              id: \"\".concat(uniqueKey),\n              name: \"\".concat(uniqueKey),\n              x: incidents[i].x,\n              y: incidents[i].y,\n              height: incidents[i].height,\n              width: incidents[i].width,\n              time: played,\n              status: status\n            }));\n            break;\n          }\n\n          if (played >= incidents[i].time) {\n            // skip elapsed incidents\n            if (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\n            if (played === incidents[i].time) {\n              incidents.splice(i, 1, Incident(_objectSpread(_objectSpread({}, incidents[i]), {}, {\n                id: \"\".concat(uniqueKey),\n                name: \"\".concat(uniqueKey),\n                status: status\n              })));\n              break;\n            }\n\n            if (i === incidents.length - 1) {\n              incidents.push(Incident({\n                id: \"\".concat(uniqueKey),\n                name: \"\".concat(uniqueKey),\n                x: incidents[i].x,\n                y: incidents[i].y,\n                height: incidents[i].height,\n                width: incidents[i].width,\n                time: played,\n                status: status\n              }));\n              break;\n            }\n\n            var interpoArea = getInterpolatedData({\n              startIncident: incidents[i],\n              endIncident: incidents[i + 1],\n              currentTime: played,\n              type: INTERPOLATION_TYPE.LENGTH\n            });\n            var interpoPos = getInterpolatedData({\n              startIncident: incidents[i],\n              endIncident: incidents[i + 1],\n              currentTime: played,\n              type: INTERPOLATION_TYPE.POSITION\n            });\n            incidents.splice(i + 1, 0, Incident({\n              id: \"\".concat(uniqueKey),\n              name: \"\".concat(uniqueKey),\n              x: interpoPos.x,\n              y: interpoPos.y,\n              height: interpoArea.height,\n              width: interpoArea.width,\n              time: played,\n              status: status\n            }));\n            break;\n          }\n        }\n\n        if (status === HIDE) entities.annotations[name].clearRedundantIncidents(status);\n        return {\n          entities: _objectSpread(_objectSpread({}, entities), {}, {\n            annotations: entities.annotations\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleListAnnotationSplit\", function (name) {\n      var timeNow = new Date().getTime().toString(36);\n      var timeNowChild1 = (new Date().getTime() + 1).toString(36);\n      var timeNowChild2 = (new Date().getTime() + 2).toString(36);\n      var status = SPLIT;\n\n      _this.setState(function (prevState) {\n        _this.UndoRedoState.save(prevState);\n\n        var played = prevState.played,\n            entities = prevState.entities,\n            annotations = prevState.annotations;\n        var parent = entities.annotations[name]; // remove ex-childrenNames\n\n        if (parent.childrenNames.length !== 0) {\n          var _iterator = _createForOfIteratorHelper(parent.childrenNames),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var c = _step.value;\n              delete entities.annotations[c];\n              var i = annotations.indexOf(c);\n              annotations.splice(i, 1);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        } // make sure parent's color is different from its children\n\n\n        var randomColor = colors[getRandomInt(colors.length)];\n\n        while (parent.color === randomColor) {\n          randomColor = colors[getRandomInt(colors.length)];\n        }\n\n        var childrenColor = randomColor; // const childrenColor = randomColor({\n        // \tluminosity: 'light',\n        // \tformat: 'rgba' // e.g. 'rgba(9, 1, 107, 0.6482447960879654)'\n        // });\n\n        var parentX;\n        var parentY;\n        var parentWidth;\n        var parentHeight;\n        var incidents = parent.incidents;\n\n        for (var _i = 0; _i < incidents.length; _i++) {\n          if (played >= incidents[_i].time) {\n            if (_i !== incidents.length - 1 && played >= incidents[_i + 1].time) continue;\n            parentX = incidents[_i].x;\n            parentY = incidents[_i].y;\n            parentWidth = incidents[_i].width;\n            parentHeight = incidents[_i].height;\n\n            if (played === incidents[_i].time) {\n              incidents.splice(_i, 1, Incident(_objectSpread(_objectSpread({}, incidents[_i]), {}, {\n                id: \"\".concat(timeNow),\n                name: \"\".concat(timeNow),\n                status: status\n              })));\n              incidents = incidents.slice(0, _i + 1);\n              break;\n            }\n\n            if (_i === incidents.length - 1) {\n              incidents.push(Incident({\n                id: \"\".concat(timeNow),\n                name: \"\".concat(timeNow),\n                x: incidents[_i].x,\n                y: incidents[_i].y,\n                height: incidents[_i].height,\n                width: incidents[_i].width,\n                time: played,\n                status: status\n              }));\n              break;\n            }\n\n            var interpoArea = getInterpolatedData({\n              startIncident: incidents[_i],\n              endIncident: incidents[_i + 1],\n              currentTime: played,\n              type: INTERPOLATION_TYPE.LENGTH\n            });\n            var interpoPos = getInterpolatedData({\n              startIncident: incidents[_i],\n              endIncident: incidents[_i + 1],\n              currentTime: played,\n              type: INTERPOLATION_TYPE.POSITION\n            });\n            parentX = interpoPos.x;\n            parentY = interpoPos.y;\n            parentWidth = interpoArea.width;\n            parentHeight = interpoArea.height;\n            incidents.splice(_i + 1, 0, Incident({\n              id: \"\".concat(timeNow),\n              name: \"\".concat(timeNow),\n              x: interpoPos.x,\n              y: interpoPos.y,\n              height: interpoArea.height,\n              width: interpoArea.width,\n              time: played,\n              status: status\n            }));\n            incidents = incidents.slice(0, _i + 2);\n            break;\n          }\n        }\n\n        parent.childrenNames = [\"\".concat(timeNowChild1), \"\".concat(timeNowChild2)];\n        parent.incidents = incidents;\n        var childIncidents1 = [Incident({\n          id: \"\".concat(timeNow),\n          name: \"\".concat(timeNow),\n          x: parentX,\n          y: parentY,\n          height: parentHeight / 2,\n          width: parentWidth / 2,\n          time: played\n        })];\n        var childIncidents2 = [Incident({\n          id: \"\".concat(timeNow),\n          name: \"\".concat(timeNow),\n          x: parentX + parentWidth / 2 - 20,\n          y: parentY + parentHeight / 2 - 20,\n          height: parentHeight / 2,\n          width: parentWidth / 2,\n          time: played\n        })];\n        entities.annotations[\"\".concat(timeNowChild1)] = Rectangle({\n          id: \"\".concat(timeNowChild1),\n          name: \"\".concat(timeNowChild1),\n          label: \"\".concat(parent.label, \"-1\"),\n          color: childrenColor,\n          incidents: childIncidents1,\n          parentName: parent.name\n        });\n        entities.annotations[\"\".concat(timeNowChild2)] = Rectangle({\n          id: \"\".concat(timeNowChild2),\n          name: \"\".concat(timeNowChild2),\n          label: \"\".concat(parent.label, \"-2\"),\n          color: childrenColor,\n          incidents: childIncidents2,\n          parentName: parent.name\n        });\n        var parentIndex = annotations.find(function (a) {\n          return a === parent.name;\n        });\n        annotations.splice(parentIndex, 0, \"\".concat(timeNowChild1));\n        annotations.splice(parentIndex, 0, \"\".concat(timeNowChild2));\n        return {\n          annotations: annotations,\n          entities: entities,\n          focusing: \"\".concat(timeNowChild2)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleUndo\", function () {\n      if (_this.UndoRedoState.previous.length === 0) return;\n\n      _this.setState(function (prevState) {\n        var state = _this.UndoRedoState.undo(prevState);\n\n        return _objectSpread({}, state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRedo\", function () {\n      if (_this.UndoRedoState.next.length === 0) return;\n\n      _this.setState(function (prevState) {\n        var state = _this.UndoRedoState.redo(prevState);\n\n        return _objectSpread({}, state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePreviewClick\", function () {\n      return _this.setState({\n        isPreviewed: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleReviewCancelSubmission\", function () {\n      return _this.setState({\n        isLoop: false,\n        isSubmitted: false,\n        isPlaying: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isEmptyAnnotationOrIncident\", function () {\n      var _this$state = _this.state,\n          annotations = _this$state.annotations,\n          defaultNumAnnotations = _this$state.defaultNumAnnotations,\n          entities = _this$state.entities;\n      var isEmptyCheckEnable = _this.props.isEmptyCheckEnable;\n      if (!isEmptyCheckEnable) return false;\n\n      if (annotations.length !== 0 && defaultNumAnnotations < annotations.length) {\n        var _iterator2 = _createForOfIteratorHelper(annotations),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var ann = _step2.value;\n            if (entities.annotations[ann].incidents.length < 2) return true;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function () {\n      var _this$state2 = _this.state,\n          annotations = _this$state2.annotations,\n          isSubmitted = _this$state2.isSubmitted;\n      var _this$props = _this.props,\n          onSubmit = _this$props.onSubmit,\n          hasReview = _this$props.hasReview,\n          emptyCheckSubmissionWarningText = _this$props.emptyCheckSubmissionWarningText;\n\n      if (_this.isEmptyAnnotationOrIncident()) {\n        _this.setState({\n          isDialogOpen: true,\n          dialogTitle: 'Submission warning',\n          dialogMessage: emptyCheckSubmissionWarningText\n        });\n\n        return;\n      }\n\n      if (!isSubmitted && hasReview) {\n        _this.setState({\n          isLoop: true,\n          isSubmitted: true,\n          played: 0,\n          isPlaying: true,\n          focusing: ''\n        });\n\n        return;\n      }\n\n      var _this$state3 = _this.state,\n          videoWidth = _this$state3.videoWidth,\n          annotationHeight = _this$state3.annotationHeight,\n          entities = _this$state3.entities,\n          duration = _this$state3.duration;\n      var url = _this.props.url;\n      var annotation = new schema.Entity('annotations');\n      var denormalizedAnnotations = denormalize({\n        annotations: annotations\n      }, {\n        annotations: [annotation]\n      }, entities).annotations;\n      denormalizedAnnotations.forEach(function (ann) {\n        delete ann.isManipulatable;\n      });\n      var data = {\n        url: url,\n        videoWidth: videoWidth,\n        annotationHeight: annotationHeight,\n        annotations: denormalizedAnnotations,\n        duration: duration\n      };\n      onSubmit(data);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDialogToggle\", function () {\n      return _this.setState(function (prevState) {\n        return {\n          isDialogOpen: !prevState.isDialogOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAddClick\", function () {\n      return _this.setState(function (prevState) {\n        return {\n          isAdding: !prevState.isAdding,\n          isPlaying: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleShowCurrent\", function (e) {\n      console.log(_this.state);\n      var annot_length = _this.state.annotations.length; // console.log(this.state.annotations[annot_length-1]);\n\n      for (var j = 0; j < annot_length - 1; j++) {\n        var not_curr_box = _this.state.annotations[j];\n        var not_curr_box_name = _this.state.entities.annotations[not_curr_box];\n\n        for (var i = 0; i < not_curr_box_name.incidents.length; i++) {\n          not_curr_box_name.incidents[i].status = \"Hide\";\n          not_curr_box_name.incidents[i].displayCurrent = false;\n        }\n      } // let curr_box = this.state.annotations[annot_length-1]\n      // console.log(this.state.entities.annotations[curr_box]);\n      // let curr_box_name = this.state.entities.annotations[curr_box];\n      // for (var i=0; i< curr_box_name.incidents.length; i++){\n      // \tcurr_box_name.incidents[i].status = \"Hide\"; \n      // }\n      // console.log(curr_box_name.incidents)\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderAddButtonUI\", function () {\n      var _this$state4 = _this.state,\n          isAdding = _this$state4.isAdding,\n          defaultNumRootAnnotations = _this$state4.defaultNumRootAnnotations,\n          annotations = _this$state4.annotations,\n          entities = _this$state4.entities;\n      var numAnnotationsCanBeAdded = _this.props.numAnnotationsCanBeAdded;\n      var isAddButtonAvailable = defaultNumRootAnnotations + numAnnotationsCanBeAdded > getLastAnnotationLabel(annotations, entities);\n\n      if (isAdding || !isAdding && isAddButtonAvailable) {\n        return __jsx(Button, {\n          disabled: isAdding,\n          color: \"primary\",\n          onClick: _this.handleAddClick,\n          className: \"d-flex align-items-center float-left\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 6\n          }\n        }, __jsx(MdAdd, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 7\n          }\n        }), __jsx(Translation, {\n          ns: \"twoDimensionalVideo\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 7\n          }\n        }, function (t) {\n          return isAdding ? t('addingBox') : t('addBox');\n        }));\n      }\n\n      return null;\n    });\n\n    var defaultAnnotations = props.defaultAnnotations,\n        _videoWidth = props.videoWidth,\n        previewHeader = props.previewHeader,\n        previewNoticeList = props.previewNoticeList,\n        _duration = props.duration;\n    console.log(props);\n    console.log(\"Hello props\\n\" + JSON.stringify(props));\n    /* ===  normalize annotation props === */\n\n    var _entities = {\n      annotations: {}\n    };\n    var _annotations = [];\n\n    if (defaultAnnotations && defaultAnnotations.length !== 0) {\n      var annotation = new schema.Entity('annotations');\n      var normalizedAnn = normalize(defaultAnnotations, [annotation]);\n      _entities.annotations = normalizedAnn.entities.annotations;\n      _annotations = normalizedAnn.result;\n\n      _annotations.forEach(function (id) {\n        _entities.annotations[id].isManipulatable = props.isDefaultAnnotationsManipulatable;\n      });\n    }\n\n    _this.state = {\n      isPreviewed: previewNoticeList && previewNoticeList.length === 0 && !previewHeader,\n      isSubmitted: false,\n      videoWidth: _videoWidth,\n      annotationHeight: 200,\n      entities: _entities,\n      annotations: _annotations,\n      played: 0,\n      isPlaying: false,\n      playbackRate: 1,\n      duration: 0,\n      isLoop: false,\n      isSeeking: false,\n      isAdding: false,\n      focusing: '',\n      isDialogOpen: false,\n      dialogTitle: '',\n      dialogMessage: '',\n      defaultNumAnnotations: _annotations.length,\n      defaultNumRootAnnotations: getLastAnnotationLabel(_annotations, _entities)\n    };\n    _this.UndoRedoState = new UndoRedo();\n    return _this;\n  }\n  /* ==================== video player ==================== */\n\n\n  _createClass(TwoDimensionalVideo, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state5 = this.state,\n          isPreviewed = _this$state5.isPreviewed,\n          isSubmitted = _this$state5.isSubmitted,\n          videoWidth = _this$state5.videoWidth,\n          annotationHeight = _this$state5.annotationHeight,\n          isPlaying = _this$state5.isPlaying,\n          played = _this$state5.played,\n          playbackRate = _this$state5.playbackRate,\n          duration = _this$state5.duration,\n          isLoop = _this$state5.isLoop,\n          isAdding = _this$state5.isAdding,\n          focusing = _this$state5.focusing,\n          entities = _this$state5.entities,\n          annotations = _this$state5.annotations,\n          isDialogOpen = _this$state5.isDialogOpen,\n          dialogTitle = _this$state5.dialogTitle,\n          dialogMessage = _this$state5.dialogMessage;\n      var _this$props2 = this.props,\n          className = _this$props2.className,\n          url = _this$props2.url,\n          previewHeader = _this$props2.previewHeader,\n          previewNoticeList = _this$props2.previewNoticeList,\n          isEmptyCheckEnable = _this$props2.isEmptyCheckEnable,\n          isSplitEnable = _this$props2.isSplitEnable,\n          isShowHideEnable = _this$props2.isShowHideEnable,\n          emptyCheckAnnotationItemWarningText = _this$props2.emptyCheckAnnotationItemWarningText,\n          emptyAnnotationReminderText = _this$props2.emptyAnnotationReminderText;\n      var twoDimensionalVideoContext = {\n        playerRef: this.handlePlayerRef,\n        entities: entities,\n        annotations: annotations,\n        duration: duration,\n        played: played,\n        focusing: focusing,\n        width: videoWidth,\n        height: annotationHeight,\n        isEmptyCheckEnable: isEmptyCheckEnable,\n        url: url,\n        isPlaying: isPlaying,\n        isLoop: isLoop,\n        playbackRate: playbackRate,\n        isAdding: isAdding,\n        isSplitEnable: isSplitEnable,\n        isShowHideEnable: isShowHideEnable,\n        emptyCheckAnnotationItemWarningText: emptyCheckAnnotationItemWarningText,\n        emptyAnnotationReminderText: emptyAnnotationReminderText,\n        onVideoReady: this.handleVideoReady,\n        onVideoProgress: this.handleVideoProgress,\n        onVideoDuration: this.handleVideoDuration,\n        onVideoEnded: this.handleVideoEnded,\n        onVideoSliderMouseUp: this.handleVideoSliderMouseUp,\n        onVideoSliderMouseDown: this.handleVideoSliderMouseDown,\n        onVideoSliderChange: this.handleVideoSliderChange,\n        onVideoRewind: this.handleVideoRewind,\n        onVideoPlayPause: this.handleVideoPlayPause,\n        onVideoSpeedChange: this.handleVideoSpeedChange,\n        onCanvasStageMouseDown: this.handleCanvasStageMouseDown,\n        onCanvasGroupMouseDown: this.handleCanvasGroupMouseDown,\n        onCanvasGroupDragEnd: this.handleCanvasGroupDragEnd,\n        onCanvasDotMouseDown: this.handleCanvasDotMouseDown,\n        onCanvasDotDragEnd: this.handleCanvasDotDragEnd,\n        onAnnotationItemClick: this.handleAnnotationItemClick,\n        onAnnotationDeleteClick: this.handleListAnnotationDelete,\n        onAnnotationShowHideClick: this.handleListAnnotationShowHide,\n        onAnnotationSplitClick: this.handleListAnnotationSplit,\n        onIncidentItemClick: this.handleIncidentItemClick,\n        onIncidentItemDeleteClick: this.handleIncidentItemDelete\n      };\n      var controlPanelUI = null;\n\n      if (isSubmitted) {\n        controlPanelUI = __jsx(Review, {\n          height: annotationHeight,\n          onConfirmSubmit: this.handleSubmit,\n          onCancelSubmit: this.handleReviewCancelSubmission,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 6\n          }\n        });\n      } else if (isPreviewed) {\n        controlPanelUI = __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 6\n          }\n        }, __jsx(\"div\", {\n          className: \"pb-3 clearfix\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 7\n          }\n        }, this.renderAddButtonUI(), __jsx(Button, {\n          color: \"primary\",\n          style: this.buttonStyles,\n          onClick: this.handleShowCurrent,\n          className: \"d-flex align-items-center float-left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 8\n          }\n        }, \"Hide Other Boxes\"), __jsx(ButtonGroup, {\n          className: \"float-right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 8\n          }\n        }, __jsx(Button, {\n          disabled: this.UndoRedoState.previous.length === 0,\n          outline: true,\n          onClick: this.handleUndo,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 9\n          }\n        }, __jsx(MdUndo, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 103\n          }\n        })), __jsx(Button, {\n          disabled: this.UndoRedoState.next.length === 0,\n          outline: true,\n          onClick: this.handleRedo,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 9\n          }\n        }, __jsx(MdRedo, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 99\n          }\n        })))), __jsx(AnnotationList, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 7\n          }\n        }));\n      } else {\n        controlPanelUI = __jsx(Preview, {\n          height: annotationHeight,\n          notices: previewNoticeList,\n          header: previewHeader,\n          onPreviewClick: this.handlePreviewClick,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 6\n          }\n        });\n      }\n\n      var rootClassName = \"two-dimensional-video\".concat(className ? \" \".concat(className) : '');\n      return __jsx(I18nextProvider, {\n        i18n: i18nextInstance,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 5\n        }\n      }, __jsx(TwoDimensionalVideoContext.Provider, {\n        value: twoDimensionalVideoContext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 6\n        }\n      }, __jsx(\"div\", {\n        className: rootClassName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"d-flex flex-wrap justify-content-around py-3 two-dimensional-video__main\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 8\n        }\n      }, __jsx(\"div\", {\n        className: \"mb-3\",\n        style: {\n          width: videoWidth\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 9\n        }\n      }, __jsx(DrawableVideoPlayer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 10\n        }\n      })), __jsx(\"div\", {\n        className: \"mb-3 two-dimensional-video__control-panel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 9\n        }\n      }, controlPanelUI)), __jsx(\"div\", {\n        className: \"d-flex justify-content-center pt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 8\n        }\n      }, isSubmitted || !isPreviewed ? '' : __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 46\n        }\n      }, __jsx(Button, {\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 51\n        }\n      }, \"Submit\"))), __jsx(PopupDialog, {\n        isOpen: isDialogOpen,\n        title: dialogTitle,\n        message: dialogMessage,\n        onToggle: this.handleDialogToggle,\n        hasCloseButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 8\n        }\n      }))));\n    }\n  }]);\n\n  return TwoDimensionalVideo;\n}(Component);\n\nTwoDimensionalVideo.propTypes = {\n  className: PropTypes.string,\n  defaultAnnotations: PropTypes.arrayOf(PropTypes.object),\n  videoWidth: PropTypes.number,\n  isDefaultAnnotationsManipulatable: PropTypes.bool,\n  previewHeader: PropTypes.string,\n  previewNoticeList: PropTypes.arrayOf(PropTypes.string),\n  isEmptyCheckEnable: PropTypes.bool,\n  isSplitEnable: PropTypes.bool,\n  isShowHideEnable: PropTypes.bool,\n  hasReview: PropTypes.bool,\n  url: PropTypes.string,\n  numAnnotationsCanBeAdded: PropTypes.number,\n  onSubmit: PropTypes.func,\n  emptyCheckSubmissionWarningText: PropTypes.string,\n  emptyCheckAnnotationItemWarningText: PropTypes.string,\n  emptyAnnotationReminderText: PropTypes.string\n};\nTwoDimensionalVideo.defaultProps = {\n  className: '',\n  defaultAnnotations: [],\n  videoWidth: 400,\n  isDefaultAnnotationsManipulatable: false,\n  previewHeader: '',\n  previewNoticeList: [],\n  isEmptyCheckEnable: false,\n  isSplitEnable: false,\n  isShowHideEnable: false,\n  hasReview: false,\n  url: '',\n  numAnnotationsCanBeAdded: 1000,\n  onSubmit: function onSubmit() {},\n  emptyCheckSubmissionWarningText: '',\n  emptyCheckAnnotationItemWarningText: '',\n  emptyAnnotationReminderText: ''\n};\nexport default TwoDimensionalVideo;","map":{"version":3,"sources":["/Applications/CrowdMOT/crowdmot-nextjs/components/two-dimensional-video/components/TwoDimensionalVideo/TwoDimensionalVideo.jsx"],"names":["React","Component","PropTypes","I18nextProvider","Translation","normalize","denormalize","schema","Button","ButtonGroup","MdRedo","MdUndo","MdAdd","PopupDialog","highContrastingColors","colors","getRandomInt","getFixedNumber","UndoRedo","i18nextInstance","Rectangle","Incident","SPLIT","HIDE","SHOW","TwoDimensionalVideoContext","getInterpolatedData","INTERPOLATION_TYPE","Preview","Review","AnnotationList","DrawableVideoPlayer","getLastAnnotationLabel","getUniqueKey","randomColor","require","TwoDimensionalVideo","props","marginLeft","player","setState","annotationHeight","document","getElementById","children","clientHeight","state","played","prevState","isSeeking","duration","isPlaying","isLoop","seekTo","s","playbackRate","e","target","value","entities","focusing","incidents","annotations","i","length","time","status","isAdding","stage","getStage","position","getPointerPosition","uniqueKey","color","UndoRedoState","save","push","id","name","x","y","height","width","label","group","find","bottomRight","get","moveToTop","startDrag","findAncestor","getClassName","rect","splice","activeAnchor","getParent","draggable","topLeft","topRight","bottomLeft","maxX","Math","max","getAbsolutePosition","minX","min","maxY","minY","incident","annotationName","parseFloat","incidentName","filter","t","entitiesAnnotations","isNaN","lastLabel","lastName","a","renameLabel","parentName","parent","childrenNames","indexOf","removeAnnotation","forEach","c","index","console","log","Date","getTime","toString","interpoArea","startIncident","endIncident","currentTime","type","LENGTH","interpoPos","POSITION","clearRedundantIncidents","timeNow","timeNowChild1","timeNowChild2","childrenColor","parentX","parentY","parentWidth","parentHeight","slice","childIncidents1","childIncidents2","parentIndex","previous","undo","next","redo","isPreviewed","isSubmitted","defaultNumAnnotations","isEmptyCheckEnable","ann","onSubmit","hasReview","emptyCheckSubmissionWarningText","isEmptyAnnotationOrIncident","isDialogOpen","dialogTitle","dialogMessage","videoWidth","url","annotation","Entity","denormalizedAnnotations","isManipulatable","data","annot_length","j","not_curr_box","not_curr_box_name","displayCurrent","defaultNumRootAnnotations","numAnnotationsCanBeAdded","isAddButtonAvailable","handleAddClick","defaultAnnotations","previewHeader","previewNoticeList","JSON","stringify","normalizedAnn","result","isDefaultAnnotationsManipulatable","className","isSplitEnable","isShowHideEnable","emptyCheckAnnotationItemWarningText","emptyAnnotationReminderText","twoDimensionalVideoContext","playerRef","handlePlayerRef","onVideoReady","handleVideoReady","onVideoProgress","handleVideoProgress","onVideoDuration","handleVideoDuration","onVideoEnded","handleVideoEnded","onVideoSliderMouseUp","handleVideoSliderMouseUp","onVideoSliderMouseDown","handleVideoSliderMouseDown","onVideoSliderChange","handleVideoSliderChange","onVideoRewind","handleVideoRewind","onVideoPlayPause","handleVideoPlayPause","onVideoSpeedChange","handleVideoSpeedChange","onCanvasStageMouseDown","handleCanvasStageMouseDown","onCanvasGroupMouseDown","handleCanvasGroupMouseDown","onCanvasGroupDragEnd","handleCanvasGroupDragEnd","onCanvasDotMouseDown","handleCanvasDotMouseDown","onCanvasDotDragEnd","handleCanvasDotDragEnd","onAnnotationItemClick","handleAnnotationItemClick","onAnnotationDeleteClick","handleListAnnotationDelete","onAnnotationShowHideClick","handleListAnnotationShowHide","onAnnotationSplitClick","handleListAnnotationSplit","onIncidentItemClick","handleIncidentItemClick","onIncidentItemDeleteClick","handleIncidentItemDelete","controlPanelUI","handleSubmit","handleReviewCancelSubmission","renderAddButtonUI","buttonStyles","handleShowCurrent","handleUndo","handleRedo","handlePreviewClick","rootClassName","handleDialogToggle","propTypes","string","arrayOf","object","number","bool","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { I18nextProvider, Translation } from 'react-i18next';\nimport { normalize, denormalize, schema } from 'normalizr';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { MdRedo, MdUndo, MdAdd } from 'react-icons/md';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport PopupDialog from 'shared/components/PopupDialog/PopupDialog.jsx';\nimport { highContrastingColors as colors } from 'shared/utils/colorUtils';\nimport { getRandomInt, getFixedNumber } from 'shared/utils/mathUtils';\nimport { UndoRedo } from '/Applications/CrowdMOT/crowdmot-nextjs/components/models/UndoRedo.js';\nimport i18nextInstance from './i18n';\nimport { Rectangle } from '../../models/rectangle';\nimport { Incident, SPLIT, HIDE, SHOW } from '../../models/incident';\nimport TwoDimensionalVideoContext from './twoDimensionalVideoContext';\nimport { getInterpolatedData, INTERPOLATION_TYPE } from '../../utils/interpolationUtils';\nimport Preview from '../Preview/Preview.jsx';\nimport Review from '../Review/Review.jsx';\nimport AnnotationList from '../AnnotationList/AnnotationList.jsx';\nimport DrawableVideoPlayer from '../DrawableVideoPlayer/DrawableVideoPlayer.jsx';\nimport { getLastAnnotationLabel, getUniqueKey } from '../../utils/utils';\nimport './twoDimensionalVideo.scss';\nvar randomColor = require('randomcolor');\n\nclass TwoDimensionalVideo extends Component {\n\tbuttonStyles = {\n\t\tmarginLeft: 5\n\t}\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst {\n\t\t\tdefaultAnnotations,\n\t\t\tvideoWidth,\n\t\t\tpreviewHeader,\n\t\t\tpreviewNoticeList,\n\t\t\tduration,\n\t\t} = props;\n\t\tconsole.log(props)\n\t\tconsole.log(\"Hello props\\n\"+JSON.stringify(props))\n\t\t\t\t/* ===  normalize annotation props === */\n\t\tconst entities = { annotations: {} };\n\t\tlet annotations = [];\n\t\tif (defaultAnnotations && defaultAnnotations.length !== 0) {\n\t\t\tconst annotation = new schema.Entity('annotations');\n\t\t\tconst normalizedAnn = normalize(defaultAnnotations, [annotation]);\n\t\t\tentities.annotations = normalizedAnn.entities.annotations;\n\t\t\tannotations = normalizedAnn.result;\n\t\t\tannotations.forEach((id) => {\n\t\t\t\tentities.annotations[id].isManipulatable = props.isDefaultAnnotationsManipulatable;\n\t\t\t});\n\t\t}\n\t\tthis.state = {\n\t\t\tisPreviewed: previewNoticeList && previewNoticeList.length === 0 && !previewHeader,\n\t\t\tisSubmitted: false,\n\t\t\tvideoWidth,\n\t\t\tannotationHeight: 200,\n\t\t\tentities,\n\t\t\tannotations,\n\t\t\tplayed: 0,\n\t\t\tisPlaying: false,\n\t\t\tplaybackRate: 1,\n\t\t\tduration: 0,\n\t\t\tisLoop: false,\n\t\t\tisSeeking: false,\n\t\t\tisAdding: false,\n\t\t\tfocusing: '',\n\t\t\tisDialogOpen: false,\n\t\t\tdialogTitle: '',\n\t\t\tdialogMessage: '',\n\t\t\tdefaultNumAnnotations: annotations.length,\n\t\t\tdefaultNumRootAnnotations: getLastAnnotationLabel(annotations, entities),\n\t\t};\n\t\tthis.UndoRedoState = new UndoRedo();\n\t}\n\n\t/* ==================== video player ==================== */\n\thandlePlayerRef = (player) => {\n\t\tthis.player = player;\n\t}\n\n\thandleVideoReady = () => {\n\t\tthis.setState({ annotationHeight: document.getElementById('react-player').children[0].clientHeight });\n\t}\n\n\thandleVideoProgress = (state) => {\n\t\tconst { played } = state;\n\t\tthis.setState((prevState) => {\n\t\t\tif (prevState.isSeeking) return null;\n\t\t\treturn { played: getFixedNumber(played, 5) };\n\t\t});\n\t}\n\n\thandleVideoDuration = (duration) => {\n\t\tthis.setState({ duration });\n\t}\n\n\thandleVideoEnded = () => {\n\t\tthis.setState(prevState => ({ isPlaying: prevState.isLoop }));\n\t}\n\n\thandleVideoRewind = () => {\n\t\tthis.setState({ isPlaying: false, played: 0 });\n\t\tthis.player.seekTo(0);\n\t}\n\n\thandleVideoPlayPause = () => {\n\t\tthis.setState(prevState => ({ isPlaying: !prevState.isPlaying }));\n\t}\n\n\thandleVideoSpeedChange = (s) => {\n\t\tthis.setState({ playbackRate: s });\n\t}\n\n\thandleVideoSliderMouseUp = () => {\n\t\tthis.setState({ isSeeking: false });\n\t}\n\n\thandleVideoSliderMouseDown = () => {\n\t\tthis.setState({ isPlaying: false, isSeeking: true });\n\t}\n\n\thandleVideoSliderChange = (e) => {\n\t\tconst played = getFixedNumber(e.target.value, 5);\n\t\tthis.setState((prevState) => {\n\t\t\tconst { entities } = prevState;\n\t\t\tlet { focusing } = prevState;\n\t\t\tif (focusing) {\n\t\t\t\tconst { incidents } = entities.annotations[focusing];\n\t\t\t\tfor (let i = 0; i < incidents.length; i += 1) {\n\t\t\t\t\tif (played >= incidents[i].time) {\n\t\t\t\t\t\tif (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\t\t\t\t\t\tif (incidents[i].status !== SHOW) focusing = '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (i === incidents.length - 1) focusing = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { played, focusing };\n\t\t}, () => { this.player.seekTo(played); });\n\t}\n\n\t/* ==================== canvas ==================== */\n\n\thandleCanvasStageMouseDown = (e) => {\n\t\tconst { isAdding } = this.state;\n\t\tif (!isAdding) return;\n\t\tconst stage = e.target.getStage();\n\t\tconst position = stage.getPointerPosition();\n\t\tconst uniqueKey = getUniqueKey();\n\t\tconst color = colors[getRandomInt(colors.length)];\n\t\t// const color = randomColor({\n\n\t\t// \tluminosity: 'light',\n\t\t// \tformat: 'rgba' // e.g. 'rgba(9, 1, 107, 0.6482447960879654)'\n\t\t// });\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save({ ...prevState, isAdding: false }); // Undo/Redo\n\t\t\tconst {\n\t\t\t\tannotations, entities,\n\t\t\t} = prevState;\n\t\t\tconst incidents = [];\n\t\t\tincidents.push(Incident({\n\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: position.x, y: position.y, height: 1, width: 1, time: prevState.played,\n\t\t\t}));\n\t\t\tentities.annotations[`${uniqueKey}`] = Rectangle({\n\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, label: `${getLastAnnotationLabel(annotations, entities) + 1}`, color, incidents,\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tisAdding: false,\n\t\t\t\tfocusing: `${uniqueKey}`,\n\t\t\t\tannotations: [...annotations, `${uniqueKey}`],\n\t\t\t\tentities: { ...entities, annotations: entities.annotations },\n\t\t\t};\n\t\t}, () => {\n\t\t\tconst group = stage.find(`.${uniqueKey}`)[0];\n\t\t\tconst bottomRight = group.get('.bottomRight')[0];\n\t\t\tgroup.moveToTop();\n\t\t\tbottomRight.moveToTop();\n\t\t\tbottomRight.startDrag();\n\t\t});\n\t}\n\n\thandleCanvasGroupMouseDown = (e) => {\n\t\tconst group = e.target.findAncestor('Group');\n\t\tthis.setState({ isPlaying: false, focusing: group.name() });\n\t}\n\n\thandleCanvasGroupDragEnd = (e) => {\n\t\tif (e.target.getClassName() !== 'Group') return;\n\t\tconst group = e.target;\n\t\tconst rect = group.get('Rect')[0];\n\t\tconst position = group.position();\n\t\tconst uniqueKey = getUniqueKey();\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { entities, played } = prevState;\n\t\t\tconst { incidents } = entities.annotations[group.name()];\n\t\t\tfor (let i = 0; i < incidents.length; i += 1) {\n\t\t\t\tif (played >= incidents[i].time) {\n\t\t\t\t\t// skip elapsed incidents\n\t\t\t\t\tif (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\t\t\t\t\tif (played === incidents[i].time) {\n\t\t\t\t\t\tincidents[i].x = position.x; incidents[i].y = position.y; incidents[i].width = rect.width(); incidents[i].height = rect.height();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (i === incidents.length - 1) {\n\t\t\t\t\t\tincidents.push(Incident({\n\t\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: position.x, y: position.y, width: rect.width(), height: rect.height(), time: played,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tincidents.splice(i + 1, 0, Incident({\n\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: position.x, y: position.y, height: rect.height(), width: rect.width(), time: played,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {};\n\t\t});\n\t}\n\n\thandleCanvasDotMouseDown = (e) => {\n\t\tconst group = e.target.findAncestor('Group');\n\t\tthis.setState({ focusing: group.name() });\n\t}\n\n\thandleCanvasDotDragEnd = (e) => {\n\t\tconst activeAnchor = e.target;\n\t\tconst group = activeAnchor.getParent();\n\t\tconst uniqueKey = getUniqueKey();\n\t\tgroup.draggable(true);\n\t\tconst topLeft = group.get('.topLeft')[0]; const topRight = group.get('.topRight')[0]; const bottomRight = group.get('.bottomRight')[0]; const\n\t\t\tbottomLeft = group.get('.bottomLeft')[0];\n\t\tconst maxX = Math.max(topLeft.getAbsolutePosition().x, topRight.getAbsolutePosition().x, bottomRight.getAbsolutePosition().x, bottomLeft.getAbsolutePosition().x);\n\t\tconst minX = Math.min(topLeft.getAbsolutePosition().x, topRight.getAbsolutePosition().x, bottomRight.getAbsolutePosition().x, bottomLeft.getAbsolutePosition().x);\n\t\tconst maxY = Math.max(topLeft.getAbsolutePosition().y, topRight.getAbsolutePosition().y, bottomRight.getAbsolutePosition().y, bottomLeft.getAbsolutePosition().y);\n\t\tconst minY = Math.min(topLeft.getAbsolutePosition().y, topRight.getAbsolutePosition().y, bottomRight.getAbsolutePosition().y, bottomLeft.getAbsolutePosition().y);\n\t\tthis.setState((prevState, props) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { entities, played } = prevState;\n\t\t\tconst { annotations } = entities;\n\t\t\tconst { incidents } = entities.annotations[group.name()];\n\t\t\tfor (let i = 0; i < incidents.length; i += 1) {\n\t\t\t\tif (played >= incidents[i].time) {\n\t\t\t\t\t// skip elapsed incidents\n\t\t\t\t\tif (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\t\t\t\t\tif (played === incidents[i].time) {\n\t\t\t\t\t\tincidents[i].x = minX; incidents[i].y = minY; incidents[i].height = maxY - minY; incidents[i].width = maxX - minX;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tincidents.splice(i + 1, 0, Incident({\n\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: minX, y: minY, height: maxY - minY, width: maxX - minX, time: played,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotations[group.name()].incidents = incidents;\n\t\t\treturn { entities: { ...entities, annotations } };\n\t\t});\n\t}\n\n\thandleAnnotationItemClick = name => this.setState({ focusing: name });\n\n\thandleIncidentItemClick = (incident) => {\n\t\tconst { annotationName, time } = incident;\n\t\tthis.setState({ isPlaying: false, focusing: annotationName },\n\t\t\t() => { this.player.seekTo(parseFloat(time)); });\n\t}\n\n\thandleIncidentItemDelete = (e) => {\n\t\tconst { annotationName, incidentName } = e;\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { entities } = prevState;\n\t\t\tconst { annotations } = entities;\n\t\t\tconst incidents = entities.annotations[annotationName].incidents.filter((t) => {\n\t\t\t\tif (t.name !== incidentName) return true;\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tannotations[annotationName].incidents = incidents;\n\t\t\treturn { entities: { ...entities, annotations } };\n\t\t});\n\t}\n\n\n\thandleListAnnotationDelete = (name) => {\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { entities, annotations } = prevState;\n\t\t\tconst entitiesAnnotations = entities.annotations;\n\t\t\tconst { label } = entitiesAnnotations[name];\n\t\t\t// reorder the list\n\t\t\tif (!isNaN(label)) {\n\t\t\t\tconst lastLabel = getLastAnnotationLabel(annotations, entities);\n\t\t\t\tif (`${lastLabel}` !== '1' && `${lastLabel}` !== label) {\n\t\t\t\t\tconst lastName = annotations.find(a => entitiesAnnotations[a].label === `${lastLabel}`);\n\t\t\t\t\tthis.renameLabel(annotations, entitiesAnnotations, lastName, label);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// remove name from the parent's childrenNames\n\t\t\tif (entitiesAnnotations[name].parentName) {\n\t\t\t\tconst parent = entitiesAnnotations[entitiesAnnotations[name].parentName];\n\t\t\t\tconst i = parent.childrenNames.indexOf(name);\n\t\t\t\tif (i !== -1) {\n\t\t\t\t\tparent.childrenNames.splice(i, 1);\n\t\t\t\t\tif (parent.childrenNames.length == 0 && parent.incidents[parent.incidents.length - 1].status === SPLIT) parent.incidents[parent.incidents.length - 1].status = SHOW;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// remove all its children and itself recusively\n\t\t\tthis.removeAnnotation(annotations, entitiesAnnotations, name);\n\t\t\treturn { annotations, entities: { ...entities, annotations: entitiesAnnotations }, focusing: '' };\n\t\t});\n\t}\n\n\tremoveAnnotation = (annotations, entitiesAnnotations, name) => {\n\t\tif (entitiesAnnotations[name].childrenNames.length !== 0) {\n\t\t\tentitiesAnnotations[name].childrenNames.forEach((c) => {\n\t\t\t\tthis.removeAnnotation(annotations, entitiesAnnotations, c);\n\t\t\t});\n\t\t}\n\t\tdelete entitiesAnnotations.name;\n\t\tconst i = annotations.indexOf(name);\n\t\tannotations.splice(i, 1);\n\t}\n\n\trenameLabel = (annotations, entitiesAnnotations, name, label) => {\n\t\tif (entitiesAnnotations[name].childrenNames.length !== 0) {\n\t\t\tentitiesAnnotations[name].childrenNames.forEach((c, index) => {\n\t\t\t\tthis.renameLabel(annotations, entitiesAnnotations, c, `${label}-${index + 1}`);\n\t\t\t});\n\t\t}\n\t\tentitiesAnnotations[name].label = label;\n\t}\n\n\thandleListAnnotationShowHide = (e) => {\n\t\tconsole.log(e);\n\t\tconst { name } = e;\n\t\tconst { status } = e;\n\t\tconst uniqueKey = new Date().getTime().toString(36);\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { played, entities } = prevState;\n\t\t\tconst { incidents } = entities.annotations[name];\n\t\t\tfor (let i = 0; i < incidents.length; i += 1) {\n\t\t\t\tif (i === 0 && played < incidents[i].time) {\n\t\t\t\t\tincidents.splice(0, 0, Incident({\n\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: incidents[i].x, y: incidents[i].y, height: incidents[i].height, width: incidents[i].width, time: played, status,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (played >= incidents[i].time) {\n\t\t\t\t\t// skip elapsed incidents\n\t\t\t\t\tif (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\t\t\t\t\tif (played === incidents[i].time) {\n\t\t\t\t\t\tincidents.splice(i, 1, Incident({\n\t\t\t\t\t\t\t...incidents[i], id: `${uniqueKey}`, name: `${uniqueKey}`, status,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (i === incidents.length - 1) {\n\t\t\t\t\t\tincidents.push(Incident({\n\t\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: incidents[i].x, y: incidents[i].y, height: incidents[i].height, width: incidents[i].width, time: played, status,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst interpoArea = getInterpolatedData({\n\t\t\t\t\t\tstartIncident: incidents[i],\n\t\t\t\t\t\tendIncident: incidents[i + 1],\n\t\t\t\t\t\tcurrentTime: played,\n\t\t\t\t\t\ttype: INTERPOLATION_TYPE.LENGTH,\n\t\t\t\t\t});\n\t\t\t\t\tconst interpoPos = getInterpolatedData({\n\t\t\t\t\t\tstartIncident: incidents[i],\n\t\t\t\t\t\tendIncident: incidents[i + 1],\n\t\t\t\t\t\tcurrentTime: played,\n\t\t\t\t\t\ttype: INTERPOLATION_TYPE.POSITION,\n\t\t\t\t\t});\n\t\t\t\t\tincidents.splice(i + 1, 0, Incident({\n\t\t\t\t\t\tid: `${uniqueKey}`, name: `${uniqueKey}`, x: interpoPos.x, y: interpoPos.y, height: interpoArea.height, width: interpoArea.width, time: played, status,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (status === HIDE) entities.annotations[name].clearRedundantIncidents(status);\n\t\t\treturn { entities: { ...entities, annotations: entities.annotations } };\n\t\t});\n\t}\n\n\n\thandleListAnnotationSplit = (name) => {\n\t\tconst timeNow = (new Date()).getTime().toString(36);\n\t\tconst timeNowChild1 = ((new Date()).getTime() + 1).toString(36);\n\t\tconst timeNowChild2 = ((new Date()).getTime() + 2).toString(36);\n\t\tconst status = SPLIT;\n\t\tthis.setState((prevState) => {\n\t\t\tthis.UndoRedoState.save(prevState);\n\t\t\tconst { played, entities, annotations } = prevState;\n\t\t\tconst parent = entities.annotations[name];\n\t\t\t// remove ex-childrenNames\n\t\t\tif (parent.childrenNames.length !== 0) {\n\t\t\t\tfor (const c of parent.childrenNames) {\n\t\t\t\t\tdelete entities.annotations[c];\n\t\t\t\t\tconst i = annotations.indexOf(c);\n\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// make sure parent's color is different from its children\n\t\t\tlet randomColor = colors[getRandomInt(colors.length)];\n\t\t\twhile (parent.color === randomColor) randomColor = colors[getRandomInt(colors.length)];\n\t\t\tconst childrenColor = randomColor;\n\t\t\t// const childrenColor = randomColor({\n\n\t\t\t// \tluminosity: 'light',\n\t\t\t// \tformat: 'rgba' // e.g. 'rgba(9, 1, 107, 0.6482447960879654)'\n\t\t\t// });\n\n\t\t\tlet parentX; let parentY; let parentWidth; let\n\t\t\t\tparentHeight;\n\t\t\tlet { incidents } = parent;\n\t\t\tfor (let i = 0; i < incidents.length; i++) {\n\t\t\t\tif (played >= incidents[i].time) {\n\t\t\t\t\tif (i !== incidents.length - 1 && played >= incidents[i + 1].time) continue;\n\t\t\t\t\tparentX = incidents[i].x;\n\t\t\t\t\tparentY = incidents[i].y;\n\t\t\t\t\tparentWidth = incidents[i].width;\n\t\t\t\t\tparentHeight = incidents[i].height;\n\t\t\t\t\tif (played === incidents[i].time) {\n\t\t\t\t\t\tincidents.splice(i, 1, Incident({\n\t\t\t\t\t\t\t...incidents[i], id: `${timeNow}`, name: `${timeNow}`, status,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tincidents = incidents.slice(0, i + 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (i === incidents.length - 1) {\n\t\t\t\t\t\tincidents.push(Incident({\n\t\t\t\t\t\t\tid: `${timeNow}`, name: `${timeNow}`, x: incidents[i].x, y: incidents[i].y, height: incidents[i].height, width: incidents[i].width, time: played, status,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst interpoArea = getInterpolatedData({\n\t\t\t\t\t\tstartIncident: incidents[i],\n\t\t\t\t\t\tendIncident: incidents[i + 1],\n\t\t\t\t\t\tcurrentTime: played,\n\t\t\t\t\t\ttype: INTERPOLATION_TYPE.LENGTH,\n\t\t\t\t\t});\n\t\t\t\t\tconst interpoPos = getInterpolatedData({\n\t\t\t\t\t\tstartIncident: incidents[i],\n\t\t\t\t\t\tendIncident: incidents[i + 1],\n\t\t\t\t\t\tcurrentTime: played,\n\t\t\t\t\t\ttype: INTERPOLATION_TYPE.POSITION,\n\t\t\t\t\t});\n\t\t\t\t\tparentX = interpoPos.x;\n\t\t\t\t\tparentY = interpoPos.y;\n\t\t\t\t\tparentWidth = interpoArea.width;\n\t\t\t\t\tparentHeight = interpoArea.height;\n\t\t\t\t\tincidents.splice(i + 1, 0, Incident({\n\t\t\t\t\t\tid: `${timeNow}`, name: `${timeNow}`, x: interpoPos.x, y: interpoPos.y, height: interpoArea.height, width: interpoArea.width, time: played, status,\n\t\t\t\t\t}));\n\t\t\t\t\tincidents = incidents.slice(0, i + 2);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparent.childrenNames = [`${timeNowChild1}`, `${timeNowChild2}`];\n\t\t\tparent.incidents = incidents;\n\t\t\tconst childIncidents1 = [Incident({\n\t\t\t\tid: `${timeNow}`, name: `${timeNow}`, x: parentX, y: parentY, height: parentHeight / 2, width: parentWidth / 2, time: played,\n\t\t\t})];\n\t\t\tconst childIncidents2 = [Incident({\n\t\t\t\tid: `${timeNow}`, name: `${timeNow}`, x: parentX + parentWidth / 2 - 20, y: parentY + parentHeight / 2 - 20, height: parentHeight / 2, width: parentWidth / 2, time: played,\n\t\t\t})];\n\t\t\tentities.annotations[`${timeNowChild1}`] = Rectangle({\n\t\t\t\tid: `${timeNowChild1}`, name: `${timeNowChild1}`, label: `${parent.label}-1`, color: childrenColor, incidents: childIncidents1, parentName: parent.name,\n\t\t\t});\n\t\t\tentities.annotations[`${timeNowChild2}`] = Rectangle({\n\t\t\t\tid: `${timeNowChild2}`, name: `${timeNowChild2}`, label: `${parent.label}-2`, color: childrenColor, incidents: childIncidents2, parentName: parent.name,\n\t\t\t});\n\t\t\tconst parentIndex = annotations.find(a => a === parent.name);\n\t\t\tannotations.splice(parentIndex, 0, `${timeNowChild1}`);\n\t\t\tannotations.splice(parentIndex, 0, `${timeNowChild2}`);\n\t\t\treturn { annotations, entities, focusing: `${timeNowChild2}` };\n\t\t});\n\t}\n\n\t/* ==================== undo/redo ==================== */\n\thandleUndo = () => {\n\t\tif (this.UndoRedoState.previous.length === 0) return;\n\t\tthis.setState((prevState) => {\n\t\t\tconst state = this.UndoRedoState.undo(prevState);\n\t\t\treturn { ...state };\n\t\t});\n\t}\n\n\thandleRedo = () => {\n\t\tif (this.UndoRedoState.next.length === 0) return;\n\t\tthis.setState((prevState) => {\n\t\t\tconst state = this.UndoRedoState.redo(prevState);\n\t\t\treturn { ...state };\n\t\t});\n\t}\n\n\t/* ==================== preview ================ */\n\thandlePreviewClick = () => this.setState({ isPreviewed: true });\n\n\t/* ==================== review ==================== */\n\thandleReviewCancelSubmission = () => this.setState({ isLoop: false, isSubmitted: false, isPlaying: false });\n\n\t/* ==================== others ==================== */\n\tisEmptyAnnotationOrIncident = () => {\n\t\tconst { annotations, defaultNumAnnotations, entities } = this.state;\n\t\tconst { isEmptyCheckEnable } = this.props;\n\t\tif (!isEmptyCheckEnable) return false;\n\t\tif (annotations.length !== 0 && defaultNumAnnotations < annotations.length) {\n\t\t\tfor (const ann of annotations) {\n\t\t\t\tif (entities.annotations[ann].incidents.length < 2) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\thandleSubmit = () => {\n\t\tconst { annotations, isSubmitted } = this.state;\n\t\tconst { onSubmit, hasReview, emptyCheckSubmissionWarningText } = this.props;\n\n\t\tif (this.isEmptyAnnotationOrIncident()) {\n\t\t\tthis.setState({ isDialogOpen: true, dialogTitle: 'Submission warning', dialogMessage: emptyCheckSubmissionWarningText });\n\t\t\treturn;\n\t\t}\n\t\tif (!isSubmitted && hasReview) {\n\t\t\tthis.setState({\n\t\t\t\tisLoop: true, isSubmitted: true, played: 0, isPlaying: true, focusing: '',\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst { videoWidth, annotationHeight, entities, duration } = this.state;\n\t\tconst { url } = this.props;\n\t\tconst annotation = new schema.Entity('annotations');\n\t\tconst denormalizedAnnotations = denormalize({ annotations }, { annotations: [annotation] }, entities).annotations;\n\t\tdenormalizedAnnotations.forEach((ann) => {\n\t\t\tdelete ann.isManipulatable;\n\t\t});\n\t\tconst data = {\n\t\t\turl, videoWidth, annotationHeight, annotations: denormalizedAnnotations, duration\n\t\t};\n\t\tonSubmit(data);\n\t}\n\n\thandleDialogToggle = () => this.setState(prevState => ({ isDialogOpen: !prevState.isDialogOpen }));\n\n\thandleAddClick = () => this.setState(prevState => ({ isAdding: !prevState.isAdding, isPlaying: false }));\n\n\thandleShowCurrent = (e) => {\n\t\tconsole.log(this.state);\n\t\tlet annot_length = this.state.annotations.length;\n\t\t// console.log(this.state.annotations[annot_length-1]);\n\t\tfor (var j = 0; j < annot_length - 1; j++) {\n\t\t\tlet not_curr_box = this.state.annotations[j];\n\t\t\tlet not_curr_box_name = this.state.entities.annotations[not_curr_box];\n\t\t\tfor (var i = 0; i < not_curr_box_name.incidents.length; i++) {\n\t\t\t\t not_curr_box_name.incidents[i].status = \"Hide\";\n\t\t\t\t not_curr_box_name.incidents[i].displayCurrent = false;\n\t\t\t}\n\t\t}\n\t\t\t// let curr_box = this.state.annotations[annot_length-1]\n\t\t\t// console.log(this.state.entities.annotations[curr_box]);\n\t\t\t// let curr_box_name = this.state.entities.annotations[curr_box];\n\n\t\t\t// for (var i=0; i< curr_box_name.incidents.length; i++){\n\t\t\t// \tcurr_box_name.incidents[i].status = \"Hide\"; \n\t\t\t// }\n\t\t\t// console.log(curr_box_name.incidents)\n\n\n\n\t\t}\n\n\t\trenderAddButtonUI = () => {\n\t\t\tconst {\n\t\t\t\tisAdding,\n\t\t\t\tdefaultNumRootAnnotations,\n\t\t\t\tannotations,\n\t\t\t\tentities,\n\t\t\t} = this.state;\n\t\t\tconst { numAnnotationsCanBeAdded } = this.props;\n\t\t\tconst isAddButtonAvailable = (defaultNumRootAnnotations + numAnnotationsCanBeAdded) > getLastAnnotationLabel(annotations, entities);\n\t\t\tif (isAdding || (!isAdding && isAddButtonAvailable)) {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={isAdding}\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tonClick={this.handleAddClick}\n\t\t\t\t\t\tclassName='d-flex align-items-center float-left'\n\t\t\t\t\t>\n\t\t\t\t\t\t<MdAdd />\n\t\t\t\t\t\t<Translation ns='twoDimensionalVideo'>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tt => (isAdding ? t('addingBox') : t('addBox'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Translation>\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\trender() {\n\t\t\tconst {\n\t\t\t\tisPreviewed,\n\t\t\t\tisSubmitted,\n\t\t\t\tvideoWidth,\n\t\t\t\tannotationHeight,\n\t\t\t\tisPlaying,\n\t\t\t\tplayed,\n\t\t\t\tplaybackRate,\n\t\t\t\tduration,\n\t\t\t\tisLoop,\n\t\t\t\tisAdding,\n\t\t\t\tfocusing,\n\t\t\t\tentities,\n\t\t\t\tannotations,\n\t\t\t\tisDialogOpen,\n\t\t\t\tdialogTitle,\n\t\t\t\tdialogMessage,\n\t\t\t} = this.state;\n\t\t\tconst {\n\t\t\t\tclassName,\n\t\t\t\turl,\n\t\t\t\tpreviewHeader,\n\t\t\t\tpreviewNoticeList,\n\t\t\t\tisEmptyCheckEnable,\n\t\t\t\tisSplitEnable,\n\t\t\t\tisShowHideEnable,\n\t\t\t\temptyCheckAnnotationItemWarningText,\n\t\t\t\temptyAnnotationReminderText,\n\t\t\t} = this.props;\n\t\t\tconst twoDimensionalVideoContext = {\n\t\t\t\tplayerRef: this.handlePlayerRef,\n\t\t\t\tentities,\n\t\t\t\tannotations,\n\t\t\t\tduration,\n\t\t\t\tplayed,\n\t\t\t\tfocusing,\n\t\t\t\twidth: videoWidth,\n\t\t\t\theight: annotationHeight,\n\t\t\t\tisEmptyCheckEnable,\n\t\t\t\turl,\n\t\t\t\tisPlaying,\n\t\t\t\tisLoop,\n\t\t\t\tplaybackRate,\n\t\t\t\tisAdding,\n\t\t\t\tisSplitEnable,\n\t\t\t\tisShowHideEnable,\n\t\t\t\temptyCheckAnnotationItemWarningText,\n\t\t\t\temptyAnnotationReminderText,\n\t\t\t\tonVideoReady: this.handleVideoReady,\n\t\t\t\tonVideoProgress: this.handleVideoProgress,\n\t\t\t\tonVideoDuration: this.handleVideoDuration,\n\t\t\t\tonVideoEnded: this.handleVideoEnded,\n\t\t\t\tonVideoSliderMouseUp: this.handleVideoSliderMouseUp,\n\t\t\t\tonVideoSliderMouseDown: this.handleVideoSliderMouseDown,\n\t\t\t\tonVideoSliderChange: this.handleVideoSliderChange,\n\t\t\t\tonVideoRewind: this.handleVideoRewind,\n\t\t\t\tonVideoPlayPause: this.handleVideoPlayPause,\n\t\t\t\tonVideoSpeedChange: this.handleVideoSpeedChange,\n\t\t\t\tonCanvasStageMouseDown: this.handleCanvasStageMouseDown,\n\t\t\t\tonCanvasGroupMouseDown: this.handleCanvasGroupMouseDown,\n\t\t\t\tonCanvasGroupDragEnd: this.handleCanvasGroupDragEnd,\n\t\t\t\tonCanvasDotMouseDown: this.handleCanvasDotMouseDown,\n\t\t\t\tonCanvasDotDragEnd: this.handleCanvasDotDragEnd,\n\t\t\t\tonAnnotationItemClick: this.handleAnnotationItemClick,\n\t\t\t\tonAnnotationDeleteClick: this.handleListAnnotationDelete,\n\t\t\t\tonAnnotationShowHideClick: this.handleListAnnotationShowHide,\n\t\t\t\tonAnnotationSplitClick: this.handleListAnnotationSplit,\n\t\t\t\tonIncidentItemClick: this.handleIncidentItemClick,\n\t\t\t\tonIncidentItemDeleteClick: this.handleIncidentItemDelete,\n\t\t\t};\n\n\t\t\tlet controlPanelUI = null;\n\t\t\tif (isSubmitted) {\n\t\t\t\tcontrolPanelUI = (\n\t\t\t\t\t<Review\n\t\t\t\t\t\theight={annotationHeight}\n\t\t\t\t\t\tonConfirmSubmit={this.handleSubmit}\n\t\t\t\t\t\tonCancelSubmit={this.handleReviewCancelSubmission}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} else if (isPreviewed) {\n\t\t\t\tcontrolPanelUI = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className='pb-3 clearfix'>\n\t\t\t\t\t\t\t{this.renderAddButtonUI()}\n\t\t\t\t\t\t\t<Button color='primary'\n\t\t\t\t\t\t\t\tstyle={this.buttonStyles}\n\t\t\t\t\t\t\t\tonClick={this.handleShowCurrent}\n\t\t\t\t\t\t\t\tclassName='d-flex align-items-center float-left'>\n\t\t\t\t\t\t\t\tHide Other Boxes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<ButtonGroup className='float-right'>\n\t\t\t\t\t\t\t\t<Button disabled={this.UndoRedoState.previous.length === 0} outline onClick={this.handleUndo}><MdUndo /></Button>\n\t\t\t\t\t\t\t\t<Button disabled={this.UndoRedoState.next.length === 0} outline onClick={this.handleRedo}><MdRedo /></Button>\n\n\t\t\t\t\t\t\t</ButtonGroup>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<AnnotationList />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontrolPanelUI = (\n\t\t\t\t\t<Preview\n\t\t\t\t\t\theight={annotationHeight}\n\t\t\t\t\t\tnotices={previewNoticeList}\n\t\t\t\t\t\theader={previewHeader}\n\t\t\t\t\t\tonPreviewClick={this.handlePreviewClick}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst rootClassName = `two-dimensional-video${className ? ` ${className}` : ''}`;\n\t\t\treturn (\n\t\t\t\t\n\t\t\t\t<I18nextProvider i18n={i18nextInstance}>\n\t\t\t\t\t<TwoDimensionalVideoContext.Provider value={twoDimensionalVideoContext}>\n\t\t\t\t\t\t<div className={rootClassName}>\n\t\t\t\t\t\t\t<div className='d-flex flex-wrap justify-content-around py-3 two-dimensional-video__main'>\n\t\t\t\t\t\t\t\t<div className='mb-3' style={{ width: videoWidth }}>\n\t\t\t\t\t\t\t\t\t<DrawableVideoPlayer />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='mb-3 two-dimensional-video__control-panel'>\n\t\t\t\t\t\t\t\t\t{controlPanelUI}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='d-flex justify-content-center pt-3'>\n\t\t\t\t\t\t\t\t{isSubmitted || !isPreviewed ? '' : (<div><Button onClick={this.handleSubmit}>Submit</Button></div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<PopupDialog isOpen={isDialogOpen} title={dialogTitle} message={dialogMessage} onToggle={this.handleDialogToggle} hasCloseButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TwoDimensionalVideoContext.Provider>\n\t\t\t\t</I18nextProvider>\n\t\t\t);\n\t\t}\n\t}\n\n\tTwoDimensionalVideo.propTypes = {\n\t\tclassName: PropTypes.string,\n\t\tdefaultAnnotations: PropTypes.arrayOf(PropTypes.object),\n\t\tvideoWidth: PropTypes.number,\n\t\tisDefaultAnnotationsManipulatable: PropTypes.bool,\n\t\tpreviewHeader: PropTypes.string,\n\t\tpreviewNoticeList: PropTypes.arrayOf(PropTypes.string),\n\t\tisEmptyCheckEnable: PropTypes.bool,\n\t\tisSplitEnable: PropTypes.bool,\n\t\tisShowHideEnable: PropTypes.bool,\n\t\thasReview: PropTypes.bool,\n\t\turl: PropTypes.string,\n\t\tnumAnnotationsCanBeAdded: PropTypes.number,\n\t\tonSubmit: PropTypes.func,\n\t\temptyCheckSubmissionWarningText: PropTypes.string,\n\t\temptyCheckAnnotationItemWarningText: PropTypes.string,\n\t\temptyAnnotationReminderText: PropTypes.string,\n\t\t\n\t};\n\t\n\tTwoDimensionalVideo.defaultProps = {\n\t\tclassName: '',\n\t\tdefaultAnnotations: [],\n\t\tvideoWidth: 400,\n\t\tisDefaultAnnotationsManipulatable: false,\n\t\tpreviewHeader: '',\n\t\tpreviewNoticeList: [],\n\t\tisEmptyCheckEnable: false,\n\t\tisSplitEnable: false,\n\t\tisShowHideEnable: false,\n\t\thasReview: false,\n\t\turl: '',\n\t\tnumAnnotationsCanBeAdded: 1000,\n\t\tonSubmit: () => { },\n\t\temptyCheckSubmissionWarningText: '',\n\t\temptyCheckAnnotationItemWarningText: '',\n\t\temptyAnnotationReminderText: '',\n\t};\n\texport default TwoDimensionalVideo;\n"]},"metadata":{},"sourceType":"module"}