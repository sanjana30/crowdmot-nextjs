{"ast":null,"code":"var _jsxFileName = \"/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useReducer } from \"react\";\nimport Button from '../components/Button';\nimport Field from '../components/Field';\nimport Input from '../components/Input';\nimport Label from '../components/Label';\nimport EmailService from '../services/email';\n\nfunction reducer(state, action) {\n  var _action$value, _action$value2;\n\n  let error;\n\n  switch (action.type) {\n    case 'update-name':\n      error = ((_action$value = action.value) === null || _action$value === void 0 ? void 0 : _action$value.length) < 2 ? 'not valid' : undefined;\n      return _objectSpread({}, state, {\n        name: action.value,\n        errors: _objectSpread({}, state.errors, {\n          name: error\n        })\n      });\n\n    case 'update-email':\n      error = !EmailService.valid(action.value) ? 'not valid' : undefined;\n      return _objectSpread({}, state, {\n        email: action.value,\n        errors: _objectSpread({}, state.errors, {\n          email: error\n        })\n      });\n\n    case 'update-password':\n      error = ((_action$value2 = action.value) === null || _action$value2 === void 0 ? void 0 : _action$value2.length) < 7 ? 'too short' : undefined;\n      return _objectSpread({}, state, {\n        password: action.value,\n        errors: _objectSpread({}, state.errors, {\n          password: error\n        })\n      });\n\n    default:\n      return state;\n  }\n\n  return state;\n}\n\nexport default (props => {\n  var _state$errors, _state$errors2, _state$errors3;\n\n  const {\n    0: isSignUp,\n    1: setIsSignUp\n  } = useState(false); //{name: String, password: String, email: String, error: {name, password, email}}\n\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, {});\n\n  const hasError = () => {\n    if (isSignUp) {\n      //check name, email, password\n      return !(state.name && state.email && state.password) || state.errors.name != undefined || state.errors.email != undefined || state.errors.password != undefined // Object.values(state.errors ?? {}).filter(Boolean).length > 0\n      ;\n    } else {\n      //check email , password\n      return !(state.email && state.password) || 'email' in state.errors || 'password' in state.errors // Object.values(state.errors ?? {}).filter(Boolean).length >0\n      ;\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-4037609192\" + \" \" + \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-4037609192\" + \" \" + \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, isSignUp && __jsx(React.Fragment, null, __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, __jsx(Label, {\n    error: (_state$errors = state.errors) === null || _state$errors === void 0 ? void 0 : _state$errors.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \" Name\"), __jsx(Input, {\n    name: \"name\",\n    type: \"text\",\n    value: state.name,\n    onChange: ({\n      target\n    }) => dispatch({\n      type: 'update-name',\n      value: target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }))), __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, __jsx(Label, {\n    error: (_state$errors2 = state.errors) === null || _state$errors2 === void 0 ? void 0 : _state$errors2.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, \" Email\"), __jsx(Input, {\n    name: \"email\",\n    type: \"email\",\n    value: state.email,\n    onChange: ({\n      target\n    }) => dispatch({\n      type: 'update-email',\n      value: target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  })), __jsx(Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, __jsx(Label, {\n    error: (_state$errors3 = state.errors) === null || _state$errors3 === void 0 ? void 0 : _state$errors3.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \" Password\"), __jsx(Input, {\n    name: \"password\",\n    type: \"password\",\n    value: state.password,\n    onChange: ({\n      target\n    }) => dispatch({\n      type: 'update-password',\n      value: target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  })), __jsx(Button, {\n    disabled: hasError(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, isSignUp ? \"Sign up\" : \"Log in\"), __jsx(\"p\", {\n    className: \"jsx-4037609192\" + \" \" + \"log-in-prompt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, isSignUp ? \"Have\" : \"Need\", \" an account?\", __jsx(\"span\", {\n    className: \"jsx-4037609192\" + \" \" + \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, \"Click below, fill out the form, et voila!\")), __jsx(Button, {\n    onClick: () => setIsSignUp(!isSignUp),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, isSignUp ? \"Log in\" : \"Sign up\"), __jsx(\"p\", {\n    className: \"jsx-4037609192\" + \" \" + \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"errors?.auth\", \" \"))), __jsx(_JSXStyle, {\n    id: \"4037609192\",\n    __self: this\n  }, \".error.jsx-4037609192{text-align:center;color:var(--error);}.page.jsx-4037609192{width:100%;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.log-in-prompt.jsx-4037609192{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:0.25rem;}.log-in-prompt.jsx-4037609192>.small.jsx-4037609192{font-size:0.75rem;opacity:0.6;}.form.jsx-4037609192{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:300px;}.form.jsx-4037609192>.field,.form.jsx-4037609192>.btn{margin-bottom:0.5rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9BcHBsaWNhdGlvbnMvQ3Jvd2RNT1QvY3Jvd2Rtb3QtbmV4dGpzL3BhZ2VzL2xvZ2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlGb0IsQUFHNkIsQUFJUCxBQVFFLEFBT0ssQUFJTCxBQU1RLFdBeEJKLE9BSkUsQUFtQlAsR0FVZCxPQXhCZSxFQWVmLE9BbkJBLHFDQVd3QixBQVdBLDRCQWpCQSxrREFPSCxBQVdQLFlBQ2QsZ0JBbEJxQixpRUFPSSw0QkFOQSx1RUFPSixtQkFDckIsU0FQQSIsImZpbGUiOiIvQXBwbGljYXRpb25zL0Nyb3dkTU9UL2Nyb3dkbW90LW5leHRqcy9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vY29tcG9uZW50cy9CdXR0b24nXG5pbXBvcnQgRmllbGQgZnJvbSAnLi4vY29tcG9uZW50cy9GaWVsZCdcbmltcG9ydCBJbnB1dCBmcm9tICcuLi9jb21wb25lbnRzL0lucHV0J1xuaW1wb3J0IExhYmVsIGZyb20gJy4uL2NvbXBvbmVudHMvTGFiZWwnXG5pbXBvcnQgRW1haWxTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2VtYWlsJ1xuXG5mdW5jdGlvbiByZWR1Y2VyKHN0YXRlLCBhY3Rpb24pIHtcbiAgICBsZXQgZXJyb3I7XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICd1cGRhdGUtbmFtZSc6XG4gICAgICAgICAgICBlcnJvciA9IGFjdGlvbi52YWx1ZT8ubGVuZ3RoIDwgMiA/ICdub3QgdmFsaWQnIDogdW5kZWZpbmVkXG4gICAgICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbmFtZTogYWN0aW9uLnZhbHVlLCBlcnJvcnM6IHsgLi4uc3RhdGUuZXJyb3JzLCBuYW1lOiBlcnJvciB9IH07XG4gICAgICAgIGNhc2UgJ3VwZGF0ZS1lbWFpbCc6XG4gICAgICAgICAgICBlcnJvciA9ICFFbWFpbFNlcnZpY2UudmFsaWQoYWN0aW9uLnZhbHVlKSA/ICdub3QgdmFsaWQnIDogdW5kZWZpbmVkXG4gICAgICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgZW1haWw6IGFjdGlvbi52YWx1ZSwgZXJyb3JzOiB7IC4uLnN0YXRlLmVycm9ycywgZW1haWw6IGVycm9yIH0gfTtcbiAgICAgICAgY2FzZSAndXBkYXRlLXBhc3N3b3JkJzpcbiAgICAgICAgICAgIGVycm9yID0gYWN0aW9uLnZhbHVlPy5sZW5ndGggPCA3ID8gJ3RvbyBzaG9ydCcgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBwYXNzd29yZDogYWN0aW9uLnZhbHVlLCBlcnJvcnM6IHsgLi4uc3RhdGUuZXJyb3JzLCBwYXNzd29yZDogZXJyb3IgfSB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByb3BzID0+IHtcbiAgICBjb25zdCBbaXNTaWduVXAsIHNldElzU2lnblVwXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICAvL3tuYW1lOiBTdHJpbmcsIHBhc3N3b3JkOiBTdHJpbmcsIGVtYWlsOiBTdHJpbmcsIGVycm9yOiB7bmFtZSwgcGFzc3dvcmQsIGVtYWlsfX1cblxuICAgIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCB7fSk7XG4gICAgY29uc3QgaGFzRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIGlmIChpc1NpZ25VcCkge1xuICAgICAgICAgICAgLy9jaGVjayBuYW1lLCBlbWFpbCwgcGFzc3dvcmRcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICEoc3RhdGUubmFtZSAmJiBzdGF0ZS5lbWFpbCAmJiBzdGF0ZS5wYXNzd29yZCkgfHwgXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmVycm9ycy5uYW1lICE9IHVuZGVmaW5lZCB8fCBzdGF0ZS5lcnJvcnMuZW1haWwgIT0gdW5kZWZpbmVkIHx8IHN0YXRlLmVycm9ycy5wYXNzd29yZCAhPSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JqZWN0LnZhbHVlcyhzdGF0ZS5lcnJvcnMgPz8ge30pLmZpbHRlcihCb29sZWFuKS5sZW5ndGggPiAwXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2NoZWNrIGVtYWlsICwgcGFzc3dvcmRcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICEoc3RhdGUuZW1haWwgJiYgc3RhdGUucGFzc3dvcmQpIHx8IFxuICAgICAgICAgICAgICAgICAgICAnZW1haWwnIGluIHN0YXRlLmVycm9ycyB8fCAncGFzc3dvcmQnIGluIHN0YXRlLmVycm9yc1xuICAgICAgICAgICAgICAgICAgICAvLyBPYmplY3QudmFsdWVzKHN0YXRlLmVycm9ycyA/PyB7fSkuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCA+MFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtXCI+XG4gICAgICAgICAgICAgICAge2lzU2lnblVwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGaWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgZXJyb3I9e3N0YXRlLmVycm9ycz8ubmFtZX0+IE5hbWU8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBuYW1lPVwibmFtZVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9e3N0YXRlLm5hbWV9IG9uQ2hhbmdlPXsoeyB0YXJnZXQgfSkgPT4gZGlzcGF0Y2goeyB0eXBlOiAndXBkYXRlLW5hbWUnLCB2YWx1ZTogdGFyZ2V0LnZhbHVlIH0pfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9GaWVsZD5cbiAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8RmllbGQ+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBlcnJvcj17c3RhdGUuZXJyb3JzPy5lbWFpbH0+IEVtYWlsPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0IG5hbWU9XCJlbWFpbFwiIHR5cGU9XCJlbWFpbFwiIHZhbHVlPXtzdGF0ZS5lbWFpbH0gb25DaGFuZ2U9eyh7IHRhcmdldCB9KSA9PiBkaXNwYXRjaCh7IHR5cGU6ICd1cGRhdGUtZW1haWwnLCB2YWx1ZTogdGFyZ2V0LnZhbHVlIH0pfSAvPlxuICAgICAgICAgICAgICAgIDwvRmllbGQ+XG4gICAgICAgICAgICAgICAgPEZpZWxkPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgZXJyb3I9e3N0YXRlLmVycm9ycz8ucGFzc3dvcmR9PiBQYXNzd29yZDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBuYW1lPVwicGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiB2YWx1ZT17c3RhdGUucGFzc3dvcmR9IG9uQ2hhbmdlPXsoeyB0YXJnZXQgfSkgPT4gZGlzcGF0Y2goeyB0eXBlOiAndXBkYXRlLXBhc3N3b3JkJywgdmFsdWU6IHRhcmdldC52YWx1ZSB9KX0gLz5cbiAgICAgICAgICAgICAgICA8L0ZpZWxkPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gZGlzYWJsZWQ9e2hhc0Vycm9yKCl9Pntpc1NpZ25VcCA/IFwiU2lnbiB1cFwiIDogXCJMb2cgaW5cIn08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJsb2ctaW4tcHJvbXB0XCI+XG4gICAgICAgICAgICAgICAgICAgIHtpc1NpZ25VcCA/IFwiSGF2ZVwiIDogXCJOZWVkXCJ9IGFuIGFjY291bnQ/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWNrIGJlbG93LCBmaWxsIG91dCB0aGUgZm9ybSwgZXQgdm9pbGEhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uICAgb25DbGljaz17KCkgPT4gc2V0SXNTaWduVXAoIWlzU2lnblVwKX0+XG4gICAgICAgICAgICAgICAgICAgIHtpc1NpZ25VcCA/IFwiTG9nIGluXCIgOiBcIlNpZ24gdXBcIn1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJlcnJvclwiPntcImVycm9ycz8uYXV0aFwifSA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmVycm9yIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAucGFnZSB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLmxvZy1pbi1wcm9tcHQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDAuMjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgLmxvZy1pbi1wcm9tcHQgPiAuc21hbGwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgIH1cbiAgICAgICAgLmZvcm0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmZvcm0gPiA6Z2xvYmFsKC5maWVsZCksXG4gICAgICAgIC5mb3JtID4gOmdsb2JhbCguYnRuKSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG5cblxuICAgIDwvPlxufSJdfQ== */\\n/*@ sourceURL=/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js */\"));\n});","map":{"version":3,"sources":["/Applications/CrowdMOT/crowdmot-nextjs/pages/login.js"],"names":["useState","useReducer","Button","Field","Input","Label","EmailService","reducer","state","action","error","type","value","length","undefined","name","errors","valid","email","password","props","isSignUp","setIsSignUp","dispatch","hasError","target"],"mappings":"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","sourcesContent":["import { useState, useReducer } from \"react\"\nimport Button from '../components/Button'\nimport Field from '../components/Field'\nimport Input from '../components/Input'\nimport Label from '../components/Label'\nimport EmailService from '../services/email'\n\nfunction reducer(state, action) {\n    let error;\n    switch (action.type) {\n        case 'update-name':\n            error = action.value?.length < 2 ? 'not valid' : undefined\n            return { ...state, name: action.value, errors: { ...state.errors, name: error } };\n        case 'update-email':\n            error = !EmailService.valid(action.value) ? 'not valid' : undefined\n            return { ...state, email: action.value, errors: { ...state.errors, email: error } };\n        case 'update-password':\n            error = action.value?.length < 7 ? 'too short' : undefined\n            return { ...state, password: action.value, errors: { ...state.errors, password: error } };\n        default:\n            return state;\n    }\n    return state;\n}\n\nexport default props => {\n    const [isSignUp, setIsSignUp] = useState(false);\n    //{name: String, password: String, email: String, error: {name, password, email}}\n\n    const [state, dispatch] = useReducer(reducer, {});\n    const hasError = () => {\n        if (isSignUp) {\n            //check name, email, password\n            return (\n                    !(state.name && state.email && state.password) || \n                    state.errors.name != undefined || state.errors.email != undefined || state.errors.password != undefined\n                    // Object.values(state.errors ?? {}).filter(Boolean).length > 0\n            );\n        } else {\n            \n            //check email , password\n            return (\n                    !(state.email && state.password) || \n                    'email' in state.errors || 'password' in state.errors\n                    // Object.values(state.errors ?? {}).filter(Boolean).length >0\n                    );\n        }\n    }\n\n    return <>\n        <div className=\"page\">\n            <div className=\"form\">\n                {isSignUp && (\n                    <>\n                        <Field>\n                            <Label error={state.errors?.name}> Name</Label>\n                            <Input name=\"name\" type=\"text\" value={state.name} onChange={({ target }) => dispatch({ type: 'update-name', value: target.value })} />\n                        </Field>\n                    </>\n                )}\n                <Field>\n                    <Label error={state.errors?.email}> Email</Label>\n                    <Input name=\"email\" type=\"email\" value={state.email} onChange={({ target }) => dispatch({ type: 'update-email', value: target.value })} />\n                </Field>\n                <Field>\n                    <Label error={state.errors?.password}> Password</Label>\n                    <Input name=\"password\" type=\"password\" value={state.password} onChange={({ target }) => dispatch({ type: 'update-password', value: target.value })} />\n                </Field>\n                <Button disabled={hasError()}>{isSignUp ? \"Sign up\" : \"Log in\"}</Button>\n                <p className=\"log-in-prompt\">\n                    {isSignUp ? \"Have\" : \"Need\"} an account?\n                            <span className=\"small\">\n                        Click below, fill out the form, et voila!\n                            </span>\n                </p>\n                <Button   onClick={() => setIsSignUp(!isSignUp)}>\n                    {isSignUp ? \"Log in\" : \"Sign up\"}\n                </Button>\n                <p className=\"error\">{\"errors?.auth\"} </p>\n            </div>\n        </div>\n        <style jsx>{`\n        .error {\n          text-align: center;\n          color: var(--error);\n        }\n        .page {\n          width: 100%;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n        .log-in-prompt {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          margin-top: 0.25rem;\n        }\n        .log-in-prompt > .small {\n          font-size: 0.75rem;\n          opacity: 0.6;\n        }\n        .form {\n          display: flex;\n          flex-direction: column;\n          width: 300px;\n        }\n        .form > :global(.field),\n        .form > :global(.btn) {\n          margin-bottom: 0.5rem;\n        }\n      `}</style>\n\n\n    </>\n}"]},"metadata":{},"sourceType":"module"}