{"ast":null,"code":"// import DatabaseService from \"../../services/database\";\n// import AuthService from \"../../services/auth\";\n// import User from \"../../models/User\";\n// export default async (req, res) => {\n//   if (req.method !== \"POST\") {\n//     return res.status(405).end();\n//   }\n//   DatabaseService.connect();\n//   const { name, email, password, isSignUp } = req.body;\n//   let user = await User.findOne({ email });\n//   if (isSignUp) {\n//     if (user) {\n//       return res\n//         .status(400)\n//         .end(`An account already exists for email ${email}.`);\n//     }\n//     user = new User({\n//       name,\n//       email,\n//       passwordId: await AuthService.createUser(password),\n//     });\n//     await user.save();\n//   } else {\n//     if (!user) {\n//       return res.status(400).end(`No account exists for email ${email}`);\n//     }\n//     if (!(await AuthService.validatePassword(user.passwordId, password))) {\n//       return res.status(401).end();\n//     }\n//   }\n//   res.end(\n//     await AuthService.sign({\n//       id: user._id,\n//     })\n//   );\n// };","map":null,"metadata":{},"sourceType":"script"}